<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SoftwareContainer using LXC &#8212; softwarecontainer 0.17.0-7162c0f 2017-01-20 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.17.0-7162c0f 2017-01-20',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Developer guidelines" href="../developers/index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="softwarecontainer-using-lxc">
<h1>SoftwareContainer using LXC<a class="headerlink" href="#softwarecontainer-using-lxc" title="Permalink to this headline">¶</a></h1>
<p>SoftwareContainer uses the Linux Containers (<a class="reference external" href="https://linuxcontainers.org/">LXC</a>) project as its container backend. LXC uses namespaces and cgroups,
and has been supported in the Linux kernel since 2.6.24.</p>
<div class="section" id="lxc-template">
<h2>LXC Template<a class="headerlink" href="#lxc-template" title="Permalink to this headline">¶</a></h2>
<p>LXC expects a template that sets up a basic file system structure so that the container has something to boot into.
The LXC template <code class="docutils literal"><span class="pre">SoftwareContainer</span></code> uses does three things currently:</p>
<ul class="simple">
<li>Creates a basic rootfs with all directories one would expect</li>
<li>Copies busybox into the rootfs, and populates <code class="docutils literal"><span class="pre">/bin</span></code> with all its aliases</li>
<li>Adds some conditional options to the LXC configuration file</li>
</ul>
<div class="section" id="create-basic-rootfs">
<h3>Create basic rootfs<a class="headerlink" href="#create-basic-rootfs" title="Permalink to this headline">¶</a></h3>
<p>The rootfs created is a basic FHS-like (<a class="reference external" href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard">FHS</a>)
structure, although stripped down, with the added <code class="docutils literal"><span class="pre">/gateways</span></code> directory. LXC template will also
create two paths, that will be substituted by CMake - <code class="docutils literal"><span class="pre">${CMAKE_INSTALL_PREFIX}</span></code> and
<code class="docutils literal"><span class="pre">${ADDITIONAL_FOLDER_MOUNTS}</span></code>. Furthermore, a root user and group will be created, and some
configuration options will be set in the following three areas:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">/etc/pulse/client.conf</span></code> - tell pulse not to use shm</li>
<li><code class="docutils literal"><span class="pre">/etc/machine-id</span></code> - populated with a dbus-uuid</li>
<li><code class="docutils literal"><span class="pre">/etc/resolv.conf</span></code> - copied from host</li>
</ul>
<p><code class="docutils literal"><span class="pre">/lib64</span></code> and <code class="docutils literal"><span class="pre">/usr/lib64</span></code> are also added to the rootfs - they will be empty unless they exist
in the host, in which case they will be bind mounted just like all other file systems, more on
that below in <a class="reference internal" href="#lxc-conf"><span class="std std-ref">LXC Configuration file</span></a>.</p>
</div>
<div class="section" id="copy-and-set-up-busybox">
<h3>Copy and set up busybox<a class="headerlink" href="#copy-and-set-up-busybox" title="Permalink to this headline">¶</a></h3>
<p>This step checks for busybox on the host, copies it into the rootfs for the container, then symlinks
all its functions to busybox in the <code class="docutils literal"><span class="pre">/bin</span></code> directory in the container - so that
<code class="docutils literal"><span class="pre">/bin/ls</span> <span class="pre">-&gt;</span> <span class="pre">/?bin/busybox</span></code>.</p>
<p>There is an ongoing discussion on the need for busybox at all - this has implications on startup time as well as for the actual code.</p>
</div>
<div class="section" id="set-up-dynamic-configuration-options">
<h3>Set up dynamic configuration options<a class="headerlink" href="#set-up-dynamic-configuration-options" title="Permalink to this headline">¶</a></h3>
<p>This step adds some entries to the config file for LXC. It sets the location of the rootfs, and adds some mount entries,
namely the following:</p>
<ul class="simple">
<li>The directory containing <code class="docutils literal"><span class="pre">init.lxc</span></code> is bind-mounted to <code class="docutils literal"><span class="pre">/usr/sbin</span></code></li>
<li>If <code class="docutils literal"><span class="pre">$GATEWAY_DIR</span></code> is set, bind mount its directory to <code class="docutils literal"><span class="pre">/gateways</span></code> and <code class="docutils literal"><span class="pre">chmod</span> <span class="pre">777</span></code> it.</li>
</ul>
</div>
<div class="section" id="full-example">
<h3>Full example<a class="headerlink" href="#full-example" title="Permalink to this headline">¶</a></h3>
<p>This is the full template used.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/sh -e</span>

<span class="c">#</span>
<span class="c"># Copyright (C) 2016-2017 Pelagicore AB</span>
<span class="c">#</span>
<span class="c"># Permission to use, copy, modify, and/or distribute this software for</span>
<span class="c"># any purpose with or without fee is hereby granted, provided that the</span>
<span class="c"># above copyright notice and this permission notice appear in all copies.</span>
<span class="c">#</span>
<span class="c"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND THE AUTHOR DISCLAIMS ALL</span>
<span class="c"># WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED</span>
<span class="c"># WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR</span>
<span class="c"># BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES</span>
<span class="c"># OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,</span>
<span class="c"># WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION,</span>
<span class="c"># ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS</span>
<span class="c"># SOFTWARE.</span>
<span class="c">#</span>
<span class="c"># For further information see LICENSE</span>
<span class="c">#</span>

<span class="c">#</span>
<span class="c"># This LXC template is based on the busybox one shipped with LXC.</span>
<span class="c"># Original author: Daniel Lezcano &lt;daniel.lezcano@free.fr&gt;</span>
<span class="c">#</span>
<span class="c"># LXC is free software, released under GNU LGPL 2.1</span>
<span class="c">#</span>
<span class="c"># Reader&#39;s guide: to get the full understanding of how the containers are</span>
<span class="c"># set up in this system, make sure to read the lxc configuration file</span>
<span class="c"># for this project (softwarecontainer.conf) where pty allocation, and some</span>
<span class="c"># further mount points, as well as networking set up, is listed.</span>
<span class="c">#</span>

create_rootfs<span class="o">()</span>
<span class="o">{</span>
    <span class="nv">rootfs</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nv">name</span><span class="o">=</span><span class="nv">$2</span>
    <span class="nv">res</span><span class="o">=</span>0

    <span class="c"># This is the rootfs tree in the container. Apart from the files we</span>
    <span class="c"># create below, this will be empty, and most directories will be bind</span>
    <span class="c"># mounted from the host into the container (/lib etc, see below and</span>
    <span class="c"># the configuration file).</span>

    <span class="nv">tree</span><span class="o">=</span><span class="s2">&quot;\</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/bin \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/dev \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/etc \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/etc/pulse \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/home \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/lib \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/lib64 \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/proc \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/root \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/sbin \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/usr/lib \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/usr/lib64 \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/usr/sbin \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/tmp \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/gateways \</span>
<span class="s2">        </span><span class="nv">$rootfs</span><span class="s2">/</span><span class="si">${</span><span class="nv">CMAKE_INSTALL_PREFIX</span><span class="si">}</span><span class="s2"> \</span>
<span class="s2">        </span><span class="si">${</span><span class="nv">ADDITIONAL_FOLDER_MOUNTS</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="c"># The tree needs to be writeable for the owner and read/execute for all</span>
    mkdir -p <span class="nv">$tree</span> <span class="o">||</span> <span class="k">return</span> 1
    chmod <span class="m">755</span> <span class="nv">$tree</span> <span class="o">||</span> <span class="k">return</span> 1

    <span class="c"># Create entry for root user in /etc/passwd and /etc/group</span>
    <span class="nb">echo</span> <span class="s2">&quot;root:x:0:0:root:/root:/bin/sh&quot;</span> &gt;&gt; <span class="nv">$rootfs</span>/etc/passwd
    <span class="nb">echo</span> <span class="s2">&quot;root:x:0:root&quot;</span> &gt;&gt; <span class="nv">$rootfs</span>/etc/group

    <span class="c"># We don&#39;t have an shm fs mounted, so tell pulse not to use it.</span>
    <span class="nb">echo</span> <span class="s2">&quot;disable-shm=yes&quot;</span> &gt;&gt; <span class="nv">$rootfs</span>/etc/pulse/client.conf
    <span class="c"># We generate a unique machine id for D-Bus.</span>
    dbus-uuidgen --ensure<span class="o">=</span><span class="nv">$rootfs</span>/etc/machine-id
    <span class="c"># Copy DNS info into the guest, if available</span>
    <span class="k">if</span> <span class="o">[</span> -e /etc/resolv.conf <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        cp /etc/resolv.conf <span class="nv">$rootfs</span>/etc/resolv.conf
    <span class="k">fi</span>

    <span class="k">return</span> <span class="nv">$res</span>
<span class="o">}</span>

configure_busybox<span class="o">()</span>
<span class="o">{</span>
    <span class="nv">rootfs</span><span class="o">=</span><span class="nv">$1</span>

    which busybox &gt;/dev/null 2&gt;<span class="p">&amp;</span>1
    <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nb">echo</span> <span class="s2">&quot;busybox executable is not accessible&quot;</span>
        <span class="k">return</span> 1
    <span class="k">fi</span>

    <span class="c"># Copy the busybox binary into the rootfs</span>
    cp <span class="k">$(</span>which busybox<span class="k">)</span> <span class="nv">$rootfs</span>/bin
    <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nb">echo</span> <span class="s2">&quot;failed to copy busybox in the rootfs&quot;</span>
        <span class="k">return</span> 1
    <span class="k">fi</span>

    <span class="c"># Symlink to busybox for the commands it supports</span>
    <span class="nb">cd</span> <span class="nv">$rootfs</span>/bin <span class="o">||</span> <span class="k">return</span> 1
    ./busybox --list <span class="p">|</span> xargs -n1 ln -s busybox

    <span class="k">return</span> 0
<span class="o">}</span>

copy_configuration<span class="o">()</span>
<span class="o">{</span>
    <span class="nv">path</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nv">rootfs</span><span class="o">=</span><span class="nv">$2</span>
    <span class="nv">name</span><span class="o">=</span><span class="nv">$3</span>

    <span class="c"># Set some non-static mount points, the rest are already in the config file</span>
    <span class="nb">echo</span> <span class="s2">&quot;lxc.rootfs = </span><span class="nv">$rootfs</span><span class="s2">&quot;</span> &gt;&gt; <span class="nv">$path</span>/config
    <span class="nb">echo</span> <span class="s2">&quot;lxc.mount.entry = </span><span class="si">${</span><span class="nv">CMAKE_INSTALL_PREFIX</span><span class="si">}</span><span class="s2"> </span><span class="nv">$rootfs</span><span class="s2">/</span><span class="si">${</span><span class="nv">CMAKE_INSTALL_PREFIX</span><span class="si">}</span><span class="s2"> none ro,bind 0 0&quot;</span> &gt;&gt; <span class="nv">$path</span>/config

    <span class="c"># Bind-mount the directory containing init.lxc to /usr/sbin. This is typically</span>
    <span class="c"># /usr/sbin on the host as well.</span>
    <span class="nv">INITLXCFILE</span><span class="o">=</span><span class="sb">`</span>which init.lxc<span class="sb">`</span>
    <span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nb">echo</span> <span class="s2">&quot;Error in template: init.lxc not found, unable to mount containing directory to /usr/sbin in container&quot;</span>
        <span class="k">return</span> 1
    <span class="k">fi</span>
    <span class="nb">echo</span> <span class="s2">&quot;lxc.mount.entry = </span><span class="k">$(</span>dirname <span class="nv">$INITLXCFILE</span><span class="k">)</span><span class="s2"> </span><span class="nv">$rootfs</span><span class="s2">/usr/sbin none ro,bind 0 0&quot;</span> &gt;&gt; <span class="nv">$path</span>/config

    <span class="c"># If the gateway dir variable is set, add a mount entry for that one also.</span>
    <span class="c"># The gateway folder needs to be writable since wayland requires some extra</span>
    <span class="c"># files to be created by the client in the folder where the wayland socket</span>
    <span class="c"># is located</span>
    <span class="k">if</span> <span class="o">[</span> -n <span class="s2">&quot;</span><span class="nv">$GATEWAY_DIR</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
        <span class="nb">echo</span> <span class="s2">&quot;lxc.mount.entry = </span><span class="nv">$GATEWAY_DIR</span><span class="s2"> gateways none rw,bind 0 0&quot;</span> &gt;&gt; <span class="nv">$path</span>/config
        chmod go+rwx <span class="nv">$GATEWAY_DIR</span>
    <span class="k">fi</span>
<span class="o">}</span>

usage<span class="o">()</span>
<span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2"> -h|--help -b|--buffer -p|--path=&lt;path&gt;|--rootfs=&lt;path&gt;&quot;</span>
    <span class="k">return</span> 0
<span class="o">}</span>

<span class="nv">options</span><span class="o">=</span><span class="k">$(</span>getopt -o hp:n: -l <span class="nb">help</span>,path:,name:,rootfs: -- <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="k">)</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    usage <span class="k">$(</span>basename <span class="nv">$0</span><span class="k">)</span>
    <span class="nb">exit </span>1
<span class="k">fi</span>
<span class="nb">eval set</span> -- <span class="s2">&quot;</span><span class="nv">$options</span><span class="s2">&quot;</span>

<span class="k">while</span> <span class="nb">true</span>
<span class="k">do</span>
    <span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> in
        -h<span class="p">|</span>--help<span class="o">)</span>      usage <span class="nv">$0</span> <span class="o">&amp;&amp;</span> <span class="nb">exit </span>0<span class="p">;;</span>
        -p<span class="p">|</span>--path<span class="o">)</span>      <span class="nv">path</span><span class="o">=</span><span class="nv">$2</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
        -n<span class="p">|</span>--name<span class="o">)</span>      <span class="nv">name</span><span class="o">=</span><span class="nv">$2</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
        --rootfs<span class="o">)</span>       <span class="nv">rootfs</span><span class="o">=</span><span class="nv">$2</span><span class="p">;</span> <span class="nb">shift </span>2<span class="p">;;</span>
        --<span class="o">)</span>             <span class="nb">shift </span>1<span class="p">;</span> <span class="nb">break</span> <span class="p">;;</span>
        *<span class="o">)</span>              <span class="nb">break</span> <span class="p">;;</span>
    <span class="k">esac</span>
<span class="k">done</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="k">$(</span>id -u<span class="k">)</span><span class="s2">&quot;</span> !<span class="o">=</span> <span class="s2">&quot;0&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;This script should be run as &#39;root&#39;&quot;</span>
    <span class="nb">exit </span>1
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$path</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;&#39;path&#39; parameter is required&quot;</span>
    <span class="nb">exit </span>1
<span class="k">fi</span>

<span class="c"># detect rootfs (either from contents in config, or by using $path</span>
<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$rootfs</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nv">config</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$path</span><span class="s2">/config&quot;</span>
    <span class="k">if</span> grep -q <span class="s1">&#39;^lxc.rootfs&#39;</span> <span class="nv">$config</span> 2&gt;/dev/null <span class="p">;</span> <span class="k">then</span>
        <span class="nv">rootfs</span><span class="o">=</span><span class="sb">`</span>grep <span class="s1">&#39;lxc.rootfs =&#39;</span> <span class="nv">$config</span> <span class="p">|</span> awk -F<span class="o">=</span> <span class="s1">&#39;{ print $2 }&#39;</span><span class="sb">`</span>
    <span class="k">else</span>
        <span class="nv">rootfs</span><span class="o">=</span><span class="nv">$path</span>/rootfs
    <span class="k">fi</span>
<span class="k">fi</span>

create_rootfs <span class="nv">$rootfs</span> <span class="nv">$name</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;failed to create softwarecontainer rootfs&quot;</span>
    <span class="nb">exit </span>1
<span class="k">fi</span>

configure_busybox <span class="nv">$rootfs</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;failed to configure busybox in the rootfs&quot;</span>
    <span class="nb">exit </span>1
<span class="k">fi</span>

copy_configuration <span class="nv">$path</span> <span class="nv">$rootfs</span> <span class="nv">$name</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;failed to write configuration file&quot;</span>
    <span class="nb">exit </span>1
<span class="k">fi</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="lxc-configuration-file">
<span id="lxc-conf"></span><h2>LXC Configuration file<a class="headerlink" href="#lxc-configuration-file" title="Permalink to this headline">¶</a></h2>
<p>The configuration file contains three things: network setup, device and pty/tty allocation, and mount entries.</p>
<div class="section" id="network-setup">
<h3>Network setup<a class="headerlink" href="#network-setup" title="Permalink to this headline">¶</a></h3>
<p>The Network setup configuration is used when LXC creates a veth interface, connected to
lxcbr0 (not set up here!), and for the network to be up.</p>
</div>
<div class="section" id="device-and-pty-tty-allocation">
<h3>Device and pty/tty allocation<a class="headerlink" href="#device-and-pty-tty-allocation" title="Permalink to this headline">¶</a></h3>
<p>LXC has a directive called &#8220;autodev&#8221;, creates all needed devices automatically when set.
This is used in conjunction with telling LXC to allocate tty and pty devices.</p>
</div>
<div class="section" id="mount-entries">
<h3>Mount entries<a class="headerlink" href="#mount-entries" title="Permalink to this headline">¶</a></h3>
<p>The static mount entries tell LXC to bind mount <code class="docutils literal"><span class="pre">/usr</span></code>, <code class="docutils literal"><span class="pre">/lib</span></code>, <code class="docutils literal"><span class="pre">/usr/lib</span></code> and <code class="docutils literal"><span class="pre">/proc</span></code>
into the container. These are then amended by the template when run.</p>
</div>
<div class="section" id="id1">
<h3>Full example:<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="lxc-api">
<h2>LXC API<a class="headerlink" href="#lxc-api" title="Permalink to this headline">¶</a></h2>
<p>TBD</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">SoftwareContainer using LXC</a><ul>
<li><a class="reference internal" href="#lxc-template">LXC Template</a><ul>
<li><a class="reference internal" href="#create-basic-rootfs">Create basic rootfs</a></li>
<li><a class="reference internal" href="#copy-and-set-up-busybox">Copy and set up busybox</a></li>
<li><a class="reference internal" href="#set-up-dynamic-configuration-options">Set up dynamic configuration options</a></li>
<li><a class="reference internal" href="#full-example">Full example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lxc-configuration-file">LXC Configuration file</a><ul>
<li><a class="reference internal" href="#network-setup">Network setup</a></li>
<li><a class="reference internal" href="#device-and-pty-tty-allocation">Device and pty/tty allocation</a></li>
<li><a class="reference internal" href="#mount-entries">Mount entries</a></li>
<li><a class="reference internal" href="#id1">Full example:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lxc-api">LXC API</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../developers/index.html" title="previous chapter">Developer guidelines</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/chapters/lxc/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Pelagicore AB.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../../_sources/chapters/lxc/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>