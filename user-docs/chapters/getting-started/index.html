<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting started &#8212; softwarecontainer 0.9.1-84f66b4 2016-11-08 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.9.1-84f66b4 2016-11-08',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="softwarecontainer 0.9.1-84f66b4 2016-11-08 documentation" href="../../index.html" />
    <link rel="next" title="SoftwareContainer examples" href="../examples/index.html" />
    <link rel="prev" title="Welcome to the SoftwareContainer documentation" href="../intro/index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<span id="id1"></span><h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Permalink to this headline">¶</a></h2>
<p>The user API is implemented by the SoftwareContainer Agent as a D-bus service. That API is used
to start, configure, and control containers. On the bus, the Agent has the name
<cite>com.pelagicore.SoftwareContainer</cite> and object path <cite>/com/pelagicore/SoftwareContainerAgent</cite>.</p>
<p>The Agent in turn links to the SoftwareContainer library which is to be considered an internal
API for most users.</p>
<p>The Agent and the SoftwareContainer library are split to allow for development directly towards
the library. One use case where this could be useful is when you have project specific
requirements on the integration towards SoftwareContainer. The Agent/library split is also useful
when integrating a launcher that e.g. launches apps from a UI, when it is not appropriate to
run the launcher with root privileges. In this case the launcher can use the Agent D-Bus API
without being root while the Agent has been started with root privileges.</p>
<p>Below is an example of the major entities involved in a call to create a container:</p>
<div><svg height="627" viewBox="0 0 1024 627" width="1024" xmlns="http://www.w3.org/2000/svg" xmlns:inkspace="http://www.inkscape.org/namespaces/inkscape" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs id="defs_block">
    <filter height="1.504" id="filter_blur" inkspace:collect="always" width="1.1575" x="-0.07875" y="-0.252">
      <feGaussianBlur id="feGaussianBlur3780" inkspace:collect="always" stdDeviation="4.2" />
    </filter>
  </defs>
  <title>blockdiag</title>
  <desc />
  <rect fill="rgb(0,0,0)" height="538" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="127" y="84" />
  <rect fill="rgb(0,0,0)" height="495" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="319" y="84" />
  <rect fill="rgb(0,0,0)" height="420" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="511" y="114" />
  <rect fill="rgb(0,0,0)" height="30" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="703" y="144" />
  <rect fill="rgb(0,0,0)" height="105" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="703" y="204" />
  <rect fill="rgb(0,0,0)" height="120" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="703" y="354" />
  <rect fill="rgb(0,0,0)" height="15" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="895" y="234" />
  <rect fill="rgb(0,0,0)" height="30" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="8" x="895" y="399" />
  <polygon fill="rgb(0,0,0)" points="31,77 107,77 115,85 115,92 31,92 31,77" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" />
  <polygon fill="rgb(0,0,0)" points="915,227 997,227 1005,235 1005,242 915,242 915,227" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="67" y="11" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="259" y="11" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="451" y="11" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="643" y="11" />
  <rect fill="rgb(0,0,0)" height="40" stroke="rgb(0,0,0)" style="filter:url(#filter_blur);opacity:0.7;fill-opacity:1" width="128" x="835" y="11" />
  <path d="M 128 45 L 128 632" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="538" stroke="rgb(0,0,0)" width="8" x="124" y="78" />
  <path d="M 320 45 L 320 632" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="495" stroke="rgb(0,0,0)" width="8" x="316" y="78" />
  <path d="M 512 45 L 512 632" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="420" stroke="rgb(0,0,0)" width="8" x="508" y="108" />
  <path d="M 704 45 L 704 632" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="30" stroke="rgb(0,0,0)" width="8" x="700" y="138" />
  <rect fill="moccasin" height="105" stroke="rgb(0,0,0)" width="8" x="700" y="198" />
  <rect fill="moccasin" height="120" stroke="rgb(0,0,0)" width="8" x="700" y="348" />
  <path d="M 896 45 L 896 632" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="8 4" />
  <rect fill="moccasin" height="15" stroke="rgb(0,0,0)" width="8" x="892" y="228" />
  <rect fill="moccasin" height="30" stroke="rgb(0,0,0)" width="8" x="892" y="393" />
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="64" y="5" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="128" y="31">Launcher</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="256" y="5" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="320" y="31">Agent</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="448" y="5" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="102" x="512" y="31">SoftwareContainer</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="640" y="5" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="126" x="704" y="24">ContainerAbstractInte</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="30" x="704" y="37">rface</text>
  <rect fill="rgb(255,255,255)" height="40" stroke="rgb(0,0,0)" width="128" x="832" y="5" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="36" x="896" y="31">liblxc</text>
  <path d="M 136 78 L 312 78" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="304,74 312,78 304,82" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(255,182,193)" points="28,71 104,71 112,79 112,86 28,86 28,71" stroke="rgb(0,0,0)" />
  <path d="M 104 71 L 104 79" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 104 79 L 112 79" fill="none" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="66" y="84">D-Bus side</text>
  <path d="M 328 108 L 504 108" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="496,104 504,108 496,112" stroke="rgb(0,0,0)" />
  <path d="M 520 138 L 696 138" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="688,134 696,138 688,142" stroke="rgb(0,0,0)" />
  <path d="M 520 168 L 696 168" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <polygon fill="rgb(0,0,0)" points="528,164 520,168 528,172" stroke="rgb(0,0,0)" />
  <path d="M 520 198 L 696 198" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="688,194 696,198 688,202" stroke="rgb(0,0,0)" />
  <path d="M 712 228 L 888 228" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="880,224 888,228 880,232" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(255,182,193)" points="912,221 994,221 1002,229 1002,236 912,236 912,221" stroke="rgb(0,0,0)" />
  <path d="M 994 221 L 994 229" fill="none" stroke="rgb(0,0,0)" />
  <path d="M 994 229 L 1002 229" fill="none" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="66" x="953" y="234">system side</text>
  <path d="M 712 243 L 888 243" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <polygon fill="rgb(0,0,0)" points="720,239 712,243 720,247" stroke="rgb(0,0,0)" />
  <path d="M 520 303 L 696 303" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <polygon fill="rgb(0,0,0)" points="528,299 520,303 528,307" stroke="rgb(0,0,0)" />
  <path d="M 520 348 L 696 348" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="688,344 696,348 688,352" stroke="rgb(0,0,0)" />
  <path d="M 712 393 L 888 393" fill="none" stroke="rgb(0,0,0)" />
  <polygon fill="rgb(0,0,0)" points="880,389 888,393 880,397" stroke="rgb(0,0,0)" />
  <path d="M 712 423 L 888 423" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <polygon fill="rgb(0,0,0)" points="720,419 712,423 720,427" stroke="rgb(0,0,0)" />
  <path d="M 520 468 L 696 468" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <polygon fill="rgb(0,0,0)" points="528,464 520,468 528,472" stroke="rgb(0,0,0)" />
  <path d="M 328 528 L 504 528" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <polygon fill="rgb(0,0,0)" points="336,524 328,528 336,532" stroke="rgb(0,0,0)" />
  <path d="M 136 573 L 312 573" fill="none" stroke="rgb(0,0,0)" stroke-dasharray="4" />
  <polygon fill="rgb(0,0,0)" points="144,569 136,573 144,577" stroke="rgb(0,0,0)" />
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="168" x="224" y="70">CreateContainer (D-Bus call)</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="36" x="350" y="106">init()</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="72" x="560" y="136">initialize()</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="666" y="166">ReturnCode</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="48" x="548" y="196">create()</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="114" x="773" y="226">lxc_container_new()</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="666" y="301">ReturnCode</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="42" x="545" y="346">start()</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="84" x="758" y="391">multiple calls</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="60" x="474" y="526">ReturnCode</text>
  <text fill="rgb(0,0,0)" font-family="sans-serif" font-size="11" font-style="normal" font-weight="normal" text-anchor="middle" textLength="12" x="306" y="571">ID</text>
</svg>
</div>
</div>
<div class="section" id="container-config">
<h2>Container config<a class="headerlink" href="#container-config" title="Permalink to this headline">¶</a></h2>
<p>When creating containers, a configuration is passed as a JSON string. The string is an array with objects, in the JSON sense.
The currently supported configs are:</p>
<blockquote>
<div><ul class="simple">
<li>Disk writing buffer - on or off. Key: &#8220;enableWriteBuffer&#8221;, value: <code class="docutils literal"><span class="pre">true</span></code> for on or <code class="docutils literal"><span class="pre">false</span></code> for off.</li>
</ul>
</div></blockquote>
<p>Example config JSON:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="p">[{</span>
    <span class="s">&quot;enableWriteBuffer&quot;</span><span class="p">:</span> <span class="n">true</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>The main reason this config is passed as raw JSON is to support additions in supported config options without breaking the API.</p>
<div class="section" id="write-buffer-configuration">
<h3>Write buffer configuration<a class="headerlink" href="#write-buffer-configuration" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">enableWriteBuffer</span></code> is used to enable or disable write buffers on the mounted <a class="reference internal" href="../filesystem/index.html#filesystems"><span class="std std-ref">filesystems</span></a> in the container. These
buffers consists of a RAM overlay on top of the existing <a class="reference internal" href="../filesystem/index.html#filesystems"><span class="std std-ref">filesystem</span></a>, and are synced to the underlying <a class="reference internal" href="../filesystem/index.html#filesystems"><span class="std std-ref">filesystem</span></a> on
shutdown of the container.</p>
</div>
</div>
<div class="section" id="working-with-containers">
<h2>Working with containers<a class="headerlink" href="#working-with-containers" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to work with the Agent D-Bus API and how to configure gateways to make the container useful for
specific application and platform needs.</p>
<div class="section" id="running-a-command-in-a-container">
<h3>Running a command in a container<a class="headerlink" href="#running-a-command-in-a-container" title="Permalink to this headline">¶</a></h3>
<p>In this section we will create a container, run a command in it and then shut down the
container.</p>
<dl class="docutils">
<dt>Prerequisites:</dt>
<dd><ul class="first last simple">
<li>configure and build (see project <cite>README.md</cite>)</li>
</ul>
</dd>
</dl>
<p>From the build directory, run the agent:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">sudo</span> <span class="o">./</span><span class="n">agent</span><span class="o">/</span><span class="n">softwarecontainer</span><span class="o">-</span><span class="n">agent</span>
</pre></div>
</div>
<p>Note that we are running this command with <code class="docutils literal"><span class="pre">sudo</span></code>, the Agent needs to be started with root privileges.</p>
<p>Using e.g. <code class="docutils literal"><span class="pre">gdbus</span></code>, we can introspect the Agent D-Bus service API:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">gdbus</span> <span class="n">introspect</span> <span class="o">--</span><span class="n">system</span> \
<span class="o">--</span><span class="n">dest</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="nb">object</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">pelagicore</span><span class="o">/</span><span class="n">SoftwareContainerAgent</span>
</pre></div>
</div>
<p>Next, we will start a new container so take note of the parameters of CreateContainer.</p>
<p>Start a container:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">gdbus</span> <span class="n">call</span> <span class="o">--</span><span class="n">system</span> \
<span class="o">--</span><span class="n">dest</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="nb">object</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">pelagicore</span><span class="o">/</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="n">method</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span><span class="o">.</span><span class="n">CreateContainer</span> \
<span class="s">&#39;[{&quot;enableWriteBuffer&quot;: false}]&#39;</span>
</pre></div>
</div>
<p>The JSON string passed as argument to the <code class="docutils literal"><span class="pre">config</span></code> parameter is documented in the Container config section.</p>
<p>The return value of CreateContainer is the ID of the newly created container. This is used to identify the container when e.g. shutting it down.</p>
<p>Bind mount a directory inside the container:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">gdbus</span> <span class="n">call</span> <span class="o">--</span><span class="n">system</span> \
<span class="o">--</span><span class="n">dest</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="nb">object</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">pelagicore</span><span class="o">/</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="n">method</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span><span class="o">.</span><span class="n">BindMountFolderInContainer</span> \
<span class="mi">0</span> \
<span class="s">&quot;/home/vagrant/softwarecontainer&quot;</span> \
<span class="s">&quot;app&quot;</span> \
<span class="n">false</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">containerID</span></code> - a int32 with the ID of the created container, as returned by the <code class="docutils literal"><span class="pre">CreateContainer</span></code> method.</li>
<li><code class="docutils literal"><span class="pre">pathInHost</span></code> - a string with the host path of the directory to be bind mounted into the container. The host path must exist before running the command.</li>
<li><code class="docutils literal"><span class="pre">subPathInContainer</span></code> - a string with the subpath that will be appended to <code class="docutils literal"><span class="pre">/gateways</span></code> inside the container.</li>
<li><code class="docutils literal"><span class="pre">readOnly</span></code> - a boolean with a flag to set the bind mounted directory to read only or not. This is currently not supported.</li>
</ul>
</dd>
</dl>
<p>The method assumes the path <code class="docutils literal"><span class="pre">pathInHost</span></code> exists, so choose another path if it is more convenient.
The result of the method is that the content of &#8216;/home/vagrant/softwarecontainer&#8217; will be
visible in the path <code class="docutils literal"><span class="pre">/gateways/app</span></code> inside the container. The actual location on the host can be found in
<code class="docutils literal"><span class="pre">/tmp/container/SC-&lt;container</span> <span class="pre">ID&gt;/gateways/</span></code> where the created <code class="docutils literal"><span class="pre">app</span></code> directory will be.</p>
<p>Launch something in the container:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">gdbus</span> <span class="n">call</span> <span class="o">--</span><span class="n">system</span> \
<span class="o">--</span><span class="n">dest</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="nb">object</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">pelagicore</span><span class="o">/</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="n">method</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span><span class="o">.</span><span class="n">LaunchCommand</span> \
<span class="mi">0</span> \
<span class="mi">0</span> \
<span class="s">&quot;touch hello&quot;</span> \
<span class="s">&quot;/gateways/app&quot;</span> \
<span class="s">&quot;&quot;</span> \
<span class="s">&#39;{&quot;&quot;: &quot;&quot;}&#39;</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">containerID</span></code> - a int32 with the ID of the created container, as returned by the <code class="docutils literal"><span class="pre">CreateContainer</span></code> method.</li>
<li><code class="docutils literal"><span class="pre">userID</span></code> - currently unused, use uint32 &#8216;0&#8217;.</li>
<li><code class="docutils literal"><span class="pre">commandLine</span></code> - a string with the method to run at the method line insider the container.</li>
<li><code class="docutils literal"><span class="pre">workingDirectory</span></code> - a string with a path to a directory which will be set as the working directory.</li>
<li><code class="docutils literal"><span class="pre">outputFile</span></code> - a string with a path to where stdout will be directed from within the container.</li>
<li><code class="docutils literal"><span class="pre">env</span></code> - a string:string dictionary with environment variables and values to be set in the container. These will override any variables with the same name previously set by the Environment gateway.</li>
</ul>
</dd>
</dl>
<p>The method returns the PID of the process run inside the container.</p>
<p>The above method call results in a file <code class="docutils literal"><span class="pre">hello</span></code> being created inside the conainer in <code class="docutils literal"><span class="pre">/gateways/app/</span></code>. This can
also be seen in the bind mounted location <code class="docutils literal"><span class="pre">/home/vagrant/softwarecontainer/</span></code>.</p>
<p>Shut down the container:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">gdbus</span> <span class="n">call</span> <span class="o">--</span><span class="n">system</span> \
<span class="o">--</span><span class="n">dest</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="nb">object</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">pelagicore</span><span class="o">/</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="n">method</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span><span class="o">.</span><span class="n">ShutDownContainer</span> \
<span class="mi">0</span>
</pre></div>
</div>
<p>The value passed as the <cite>containerID</cite> parameter should be the same value that was returned from the call to <cite>CreateContainer</cite>.</p>
</div>
<div class="section" id="configure-gateways">
<h3>Configure gateways<a class="headerlink" href="#configure-gateways" title="Permalink to this headline">¶</a></h3>
<p>For details about the gateway configurations, see <a class="reference internal" href="../gateways/index.html#gateways"><span class="std std-ref">Gateways</span></a></p>
<p>Once a container is created and before e.g. an application is launched in the container, gateway configurations
can be set in order to configure what the application will have access to.</p>
<p>Set gateway config:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">gdbus</span> <span class="n">call</span> <span class="o">--</span><span class="n">system</span> \
<span class="o">--</span><span class="n">dest</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="nb">object</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">com</span><span class="o">/</span><span class="n">pelagicore</span><span class="o">/</span><span class="n">SoftwareContainerAgent</span> \
<span class="o">--</span><span class="n">method</span> <span class="n">com</span><span class="o">.</span><span class="n">pelagicore</span><span class="o">.</span><span class="n">SoftwareContainerAgent</span><span class="o">.</span><span class="n">SetGatewayConfigs</span> \
<span class="mi">0</span> \
<span class="s">&#39;{&quot;env&quot;: &quot;[{</span><span class="se">\&quot;</span><span class="s">name</span><span class="se">\&quot;</span><span class="s">: </span><span class="se">\&quot;</span><span class="s">MY_VAR</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">value</span><span class="se">\&quot;</span><span class="s">: </span><span class="se">\&quot;</span><span class="s">1234</span><span class="se">\&quot;</span><span class="s">},{</span><span class="se">\&quot;</span><span class="s">name</span><span class="se">\&quot;</span><span class="s">: </span><span class="se">\&quot;</span><span class="s">OTHER_VAR</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">value</span><span class="se">\&quot;</span><span class="s">: </span><span class="se">\&quot;</span><span class="s">5678</span><span class="se">\&quot;</span><span class="s">}]&quot;}&#39;</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal"><span class="pre">containerID</span></code> - an int with the id of the created container, as returned by the <code class="docutils literal"><span class="pre">CreateContainer</span></code> method.</li>
<li><code class="docutils literal"><span class="pre">configs</span></code> - a string:string dictionary with gateway ID as key and json config as value.</li>
</ul>
</dd>
</dl>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting started</a><ul>
<li><a class="reference internal" href="#structure">Structure</a></li>
<li><a class="reference internal" href="#container-config">Container config</a><ul>
<li><a class="reference internal" href="#write-buffer-configuration">Write buffer configuration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#working-with-containers">Working with containers</a><ul>
<li><a class="reference internal" href="#running-a-command-in-a-container">Running a command in a container</a></li>
<li><a class="reference internal" href="#configure-gateways">Configure gateways</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../intro/index.html" title="previous chapter">Welcome to the SoftwareContainer documentation</a></li>
      <li>Next: <a href="../examples/index.html" title="next chapter">SoftwareContainer examples</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/chapters/getting-started/index.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Pelagicore AB.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.8</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../../_sources/chapters/getting-started/index.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>