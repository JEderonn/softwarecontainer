<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>softwarecontainer: softwarecontainer::SoftwareContainerAgent Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">softwarecontainer
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classsoftwarecontainer_1_1_software_container_agent.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">softwarecontainer::SoftwareContainerAgent Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A wrapper class.  
 <a href="classsoftwarecontainer_1_1_software_container_agent.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="softwarecontaineragent_8h_source.html">softwarecontaineragent.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for softwarecontainer::SoftwareContainerAgent:</div>
<div class="dyncontent">
<div class="center"><img src="classsoftwarecontainer_1_1_software_container_agent__inherit__graph.png" border="0" usemap="#softwarecontainer_1_1_software_container_agent_inherit__map" alt="Inheritance graph"/></div>
<map name="softwarecontainer_1_1_software_container_agent_inherit__map" id="softwarecontainer_1_1_software_container_agent_inherit__map">
<area shape="rect" id="node2" href="classsoftwarecontainer_1_1_j_s_o_n_parser.html" title="Convenience layer for the Jansson JSON parser. " alt="" coords="23,5,167,47"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for softwarecontainer::SoftwareContainerAgent:</div>
<div class="dyncontent">
<div class="center"><img src="classsoftwarecontainer_1_1_software_container_agent__coll__graph.png" border="0" usemap="#softwarecontainer_1_1_software_container_agent_coll__map" alt="Collaboration graph"/></div>
<map name="softwarecontainer_1_1_software_container_agent_coll__map" id="softwarecontainer_1_1_software_container_agent_coll__map">
<area shape="rect" id="node2" href="classsoftwarecontainer_1_1_j_s_o_n_parser.html" title="Convenience layer for the Jansson JSON parser. " alt="" coords="23,5,167,47"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa0b1c03ad0f5a17d64d5faed9fb791f5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0b1c03ad0f5a17d64d5faed9fb791f5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SoftwareContainerAgent</b> (Glib::RefPtr&lt; Glib::MainContext &gt; mainLoopContext, int preloadCount, bool shutdownContainers, int shutdownTimeout)</td></tr>
<tr class="separator:aa0b1c03ad0f5a17d64d5faed9fb791f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a663e3ed2d84de85c6779bce75ebe840c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#a663e3ed2d84de85c6779bce75ebe840c">triggerPreload</a> ()</td></tr>
<tr class="memdesc:a663e3ed2d84de85c6779bce75ebe840c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preload additional containers if needed.  <a href="#a663e3ed2d84de85c6779bce75ebe840c">More...</a><br /></td></tr>
<tr class="separator:a663e3ed2d84de85c6779bce75ebe840c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9992fc855d1e79fb5f8d46b31a02ec87"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9992fc855d1e79fb5f8d46b31a02ec87"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>deleteContainer</b> (ContainerID containerID)</td></tr>
<tr class="separator:a9992fc855d1e79fb5f8d46b31a02ec87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98efa26c7cb180df7e0d689e52fe379b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">checkContainer</a> (ContainerID containerID, <a class="el" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *&amp;container)</td></tr>
<tr class="memdesc:a98efa26c7cb180df7e0d689e52fe379b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the given containerID is valid and return a reference to the actual container.  <a href="#a98efa26c7cb180df7e0d689e52fe379b">More...</a><br /></td></tr>
<tr class="separator:a98efa26c7cb180df7e0d689e52fe379b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab15b844d7ed80339448a2005ea1cc9d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aab15b844d7ed80339448a2005ea1cc9d"></a>
ReturnCode&#160;</td><td class="memItemRight" valign="bottom"><b>readConfigElement</b> (const json_t *element)</td></tr>
<tr class="separator:aab15b844d7ed80339448a2005ea1cc9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a990e86f21dead80c727462618ecf0e91"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#a990e86f21dead80c727462618ecf0e91">parseConfig</a> (const std::string &amp;config)</td></tr>
<tr class="memdesc:a990e86f21dead80c727462618ecf0e91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse config needed for starting up the container in a correct manner.  <a href="#a990e86f21dead80c727462618ecf0e91">More...</a><br /></td></tr>
<tr class="separator:a990e86f21dead80c727462618ecf0e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadd2f97a9808715bf515a0d7797b7585"><td class="memItemLeft" align="right" valign="top">ContainerID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#aadd2f97a9808715bf515a0d7797b7585">createContainer</a> (const std::string &amp;prefix, const std::string &amp;config)</td></tr>
<tr class="memdesc:aadd2f97a9808715bf515a0d7797b7585"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new container.  <a href="#aadd2f97a9808715bf515a0d7797b7585">More...</a><br /></td></tr>
<tr class="separator:aadd2f97a9808715bf515a0d7797b7585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff174ece68886c78e8173d0c0930daa4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aff174ece68886c78e8173d0c0930daa4"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>checkJob</b> (pid_t pid, <a class="el" href="classsoftwarecontainer_1_1_command_job.html">CommandJob</a> *&amp;result)</td></tr>
<tr class="separator:aff174ece68886c78e8173d0c0930daa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c72e18a7d5bef69d748366c390cca5d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6c72e18a7d5bef69d748366c390cca5d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>writeToStdIn</b> (pid_t pid, const std::vector&lt; uint8_t &gt; &amp;bytes)</td></tr>
<tr class="separator:a6c72e18a7d5bef69d748366c390cca5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7b411263200e708872bb49af2352e13"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#ac7b411263200e708872bb49af2352e13">launchCommand</a> (ContainerID containerID, uid_t userID, const std::string &amp;cmdLine, const std::string &amp;workingDirectory, const std::string &amp;outputFile, const EnvironmentVariables &amp;env, std::function&lt; void(pid_t, int)&gt; listener)</td></tr>
<tr class="memdesc:ac7b411263200e708872bb49af2352e13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Launch the given command in a the given container.  <a href="#ac7b411263200e708872bb49af2352e13">More...</a><br /></td></tr>
<tr class="separator:ac7b411263200e708872bb49af2352e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28c1a89c1020304c89f4bd153f5ee6c0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a28c1a89c1020304c89f4bd153f5ee6c0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setContainerName</b> (ContainerID containerID, const std::string &amp;name)</td></tr>
<tr class="separator:a28c1a89c1020304c89f4bd153f5ee6c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ba4cee8f8672b665a22f06164bfe60"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa2ba4cee8f8672b665a22f06164bfe60"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>shutdownContainer</b> (ContainerID containerID)</td></tr>
<tr class="separator:aa2ba4cee8f8672b665a22f06164bfe60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acff22e38c79ba4242872fbc96b3cbdbe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acff22e38c79ba4242872fbc96b3cbdbe"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>shutdownContainer</b> (ContainerID containerID, unsigned int timeout)</td></tr>
<tr class="separator:acff22e38c79ba4242872fbc96b3cbdbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3e6e3cab9bad8db6f5ed87deeffd3a2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad3e6e3cab9bad8db6f5ed87deeffd3a2"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>bindMountFolderInContainer</b> (const uint32_t containerID, const std::string &amp;pathInHost, const std::string &amp;subPathInContainer, bool readOnly)</td></tr>
<tr class="separator:ad3e6e3cab9bad8db6f5ed87deeffd3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19799cb9be607a08a674179713adcf8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae19799cb9be607a08a674179713adcf8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setGatewayConfigs</b> (const uint32_t &amp;containerID, const std::map&lt; std::string, std::string &gt; &amp;configs)</td></tr>
<tr class="separator:ae19799cb9be607a08a674179713adcf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7470dd1bebcb73196b07d13f1e4f2b81"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7470dd1bebcb73196b07d13f1e4f2b81"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>setCapabilities</b> (const uint32_t &amp;containerID, const std::vector&lt; std::string &gt; &amp;capabilities)</td></tr>
<tr class="separator:a7470dd1bebcb73196b07d13f1e4f2b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4a978edc41a3e89132d1aa55dd4210"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abf4a978edc41a3e89132d1aa55dd4210"></a>
std::shared_ptr&lt; <a class="el" href="classsoftwarecontainer_1_1_workspace.html">Workspace</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>getWorkspace</b> ()</td></tr>
<tr class="separator:abf4a978edc41a3e89132d1aa55dd4210"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a7ea50df505b43684c4a1d82ca6cb6e82"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_j_s_o_n_parser.html#a7ea50df505b43684c4a1d82ca6cb6e82">read</a> (const json_t *element, const char *key, std::string &amp;result)</td></tr>
<tr class="memdesc:a7ea50df505b43684c4a1d82ca6cb6e82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a string from a JSON Object.  <a href="#a7ea50df505b43684c4a1d82ca6cb6e82">More...</a><br /></td></tr>
<tr class="separator:a7ea50df505b43684c4a1d82ca6cb6e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2365e81204446fec184fe17e573405"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_j_s_o_n_parser.html#aec2365e81204446fec184fe17e573405">read</a> (const json_t *element, const char *key, bool &amp;result)</td></tr>
<tr class="memdesc:aec2365e81204446fec184fe17e573405"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a boolean from a JSON Object.  <a href="#aec2365e81204446fec184fe17e573405">More...</a><br /></td></tr>
<tr class="separator:aec2365e81204446fec184fe17e573405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11e43ade1f694d939bfd566b64ddd460"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_j_s_o_n_parser.html#a11e43ade1f694d939bfd566b64ddd460">read</a> (const json_t *element, const char *key, int &amp;result)</td></tr>
<tr class="memdesc:a11e43ade1f694d939bfd566b64ddd460"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an integer from a JSON Object.  <a href="#a11e43ade1f694d939bfd566b64ddd460">More...</a><br /></td></tr>
<tr class="separator:a11e43ade1f694d939bfd566b64ddd460"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A wrapper class. </p>

<p>Definition at line <a class="el" href="softwarecontaineragent_8h_source.html#l00052">52</a> of file <a class="el" href="softwarecontaineragent_8h_source.html">softwarecontaineragent.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a663e3ed2d84de85c6779bce75ebe840c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SoftwareContainerAgent::triggerPreload </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Preload additional containers if needed. </p>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00023">23</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>Referenced by <a class="el" href="softwarecontaineragent_8cpp_source.html#l00128">createContainer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <span class="comment">//        log_debug() &lt;&lt; &quot;triggerPreload &quot; &lt;&lt; m_preloadCount - m_preloadedContainers.size();</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="keywordflow">while</span> (m_preloadedContainers.size() &lt; m_preloadCount) {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        <span class="keyword">auto</span> container = <span class="keyword">new</span> <a class="code" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a>(m_softwarecontainerWorkspace);</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        container-&gt;setContainerIDPrefix(<span class="stringliteral">&quot;Preload-&quot;</span>);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        container-&gt;preload();</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        m_preloadedContainers.push_back(SoftwareContainerPtr(container));</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    }</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html">softwarecontainer::SoftwareContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8h_source.html#l00037">softwarecontainer.h:37</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsoftwarecontainer_1_1_software_container_agent_a663e3ed2d84de85c6779bce75ebe840c_icgraph.png" border="0" usemap="#classsoftwarecontainer_1_1_software_container_agent_a663e3ed2d84de85c6779bce75ebe840c_icgraph" alt=""/></div>
<map name="classsoftwarecontainer_1_1_software_container_agent_a663e3ed2d84de85c6779bce75ebe840c_icgraph" id="classsoftwarecontainer_1_1_software_container_agent_a663e3ed2d84de85c6779bce75ebe840c_icgraph">
<area shape="rect" id="node2" href="classsoftwarecontainer_1_1_software_container_agent.html#aadd2f97a9808715bf515a0d7797b7585" title="Create a new container. " alt="" coords="232,5,411,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a98efa26c7cb180df7e0d689e52fe379b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SoftwareContainerAgent::checkContainer </td>
          <td>(</td>
          <td class="paramtype">ContainerID&#160;</td>
          <td class="paramname"><em>containerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *&amp;&#160;</td>
          <td class="paramname"><em>container</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether the given containerID is valid and return a reference to the actual container. </p>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00051">51</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>Referenced by <a class="el" href="softwarecontaineragent_8cpp_source.html#l00177">launchCommand()</a>.</p>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;{</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (isIdValid(containerID)) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        container = m_containers[containerID].get();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;Invalid container ID &quot;</span> &lt;&lt; containerID;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsoftwarecontainer_1_1_software_container_agent_a98efa26c7cb180df7e0d689e52fe379b_icgraph.png" border="0" usemap="#classsoftwarecontainer_1_1_software_container_agent_a98efa26c7cb180df7e0d689e52fe379b_icgraph" alt=""/></div>
<map name="classsoftwarecontainer_1_1_software_container_agent_a98efa26c7cb180df7e0d689e52fe379b_icgraph" id="classsoftwarecontainer_1_1_software_container_agent_a98efa26c7cb180df7e0d689e52fe379b_icgraph">
<area shape="rect" id="node2" href="classsoftwarecontainer_1_1_software_container_agent.html#ac7b411263200e708872bb49af2352e13" title="Launch the given command in a the given container. " alt="" coords="232,5,411,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a990e86f21dead80c727462618ecf0e91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SoftwareContainerAgent::parseConfig </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse config needed for starting up the container in a correct manner. </p>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00079">79</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>Referenced by <a class="el" href="softwarecontaineragent_8cpp_source.html#l00128">createContainer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (config.size() == 0) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        log_warning() &lt;&lt; <span class="stringliteral">&quot;No configuration interpreted&quot;</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    json_error_t error;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    json_t *root = json_loads(config.c_str(), 0, &amp;error);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span> (!root) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;Could not parse config: &quot;</span> &lt;&lt; error.text;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        log_error() &lt;&lt; config;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">if</span> (json_is_array(root)) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; json_array_size(root); i++) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            json_t *element = json_array_get(root, i);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keywordflow">if</span> (json_is_object(element)) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                <span class="keywordflow">if</span> (isError(readConfigElement(element))) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                    log_error() &lt;&lt; <span class="stringliteral">&quot;Could not read config element&quot;</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                log_error() &lt;&lt; <span class="stringliteral">&quot;json configuration is not an object&quot;</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;Root JSON element is not an array&quot;</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsoftwarecontainer_1_1_software_container_agent_a990e86f21dead80c727462618ecf0e91_icgraph.png" border="0" usemap="#classsoftwarecontainer_1_1_software_container_agent_a990e86f21dead80c727462618ecf0e91_icgraph" alt=""/></div>
<map name="classsoftwarecontainer_1_1_software_container_agent_a990e86f21dead80c727462618ecf0e91_icgraph" id="classsoftwarecontainer_1_1_software_container_agent_a990e86f21dead80c727462618ecf0e91_icgraph">
<area shape="rect" id="node2" href="classsoftwarecontainer_1_1_software_container_agent.html#aadd2f97a9808715bf515a0d7797b7585" title="Create a new container. " alt="" coords="232,5,411,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aadd2f97a9808715bf515a0d7797b7585"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ContainerID SoftwareContainerAgent::createContainer </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>prefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new container. </p>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00128">128</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>References <a class="el" href="softwarecontaineragent_8cpp_source.html#l00079">parseConfig()</a>, <a class="el" href="softwarecontainer_8cpp_source.html#l00066">softwarecontainer::SoftwareContainer::setMainLoopContext()</a>, and <a class="el" href="softwarecontaineragent_8cpp_source.html#l00023">triggerPreload()</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    profilepoint(<span class="stringliteral">&quot;createContainerStart&quot;</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    profilefunction(<span class="stringliteral">&quot;createContainerFunction&quot;</span>);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#a990e86f21dead80c727462618ecf0e91">parseConfig</a>(config);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *container;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (m_preloadedContainers.size() != 0) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        container = m_preloadedContainers[0].release();</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        m_preloadedContainers.erase(m_preloadedContainers.begin());</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        container = <span class="keyword">new</span> <a class="code" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a>(m_softwarecontainerWorkspace);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    ContainerID availableID = findSuitableId();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    m_containers[availableID] = SoftwareContainerPtr(container);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    log_debug() &lt;&lt; <span class="stringliteral">&quot;Created container with ID :&quot;</span> &lt;&lt; availableID;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    container-&gt;setContainerIDPrefix(prefix);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    container-&gt;<a class="code" href="classsoftwarecontainer_1_1_software_container.html#a84a34e91e09b30a2f62b25e0b3926a6d">setMainLoopContext</a>(m_mainLoopContext);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    container-&gt;init();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#a663e3ed2d84de85c6779bce75ebe840c">triggerPreload</a>();</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">return</span> availableID;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_a990e86f21dead80c727462618ecf0e91"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#a990e86f21dead80c727462618ecf0e91">softwarecontainer::SoftwareContainerAgent::parseConfig</a></div><div class="ttdeci">bool parseConfig(const std::string &amp;config)</div><div class="ttdoc">Parse config needed for starting up the container in a correct manner. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00079">softwarecontaineragent.cpp:79</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_a663e3ed2d84de85c6779bce75ebe840c"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#a663e3ed2d84de85c6779bce75ebe840c">softwarecontainer::SoftwareContainerAgent::triggerPreload</a></div><div class="ttdeci">void triggerPreload()</div><div class="ttdoc">Preload additional containers if needed. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00023">softwarecontaineragent.cpp:23</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html_a84a34e91e09b30a2f62b25e0b3926a6d"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html#a84a34e91e09b30a2f62b25e0b3926a6d">softwarecontainer::SoftwareContainer::setMainLoopContext</a></div><div class="ttdeci">void setMainLoopContext(Glib::RefPtr&lt; Glib::MainContext &gt; mainLoopContext)</div><div class="ttdoc">Set the main loop. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8cpp_source.html#l00066">softwarecontainer.cpp:66</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html">softwarecontainer::SoftwareContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8h_source.html#l00037">softwarecontainer.h:37</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsoftwarecontainer_1_1_software_container_agent_aadd2f97a9808715bf515a0d7797b7585_cgraph.png" border="0" usemap="#classsoftwarecontainer_1_1_software_container_agent_aadd2f97a9808715bf515a0d7797b7585_cgraph" alt=""/></div>
<map name="classsoftwarecontainer_1_1_software_container_agent_aadd2f97a9808715bf515a0d7797b7585_cgraph" id="classsoftwarecontainer_1_1_software_container_agent_aadd2f97a9808715bf515a0d7797b7585_cgraph">
<area shape="rect" id="node2" href="classsoftwarecontainer_1_1_software_container_agent.html#a990e86f21dead80c727462618ecf0e91" title="Parse config needed for starting up the container in a correct manner. " alt="" coords="242,5,421,61"/><area shape="rect" id="node3" href="classsoftwarecontainer_1_1_software_container.html#a84a34e91e09b30a2f62b25e0b3926a6d" title="Set the main loop. " alt="" coords="232,85,431,141"/><area shape="rect" id="node4" href="classsoftwarecontainer_1_1_software_container_agent.html#a663e3ed2d84de85c6779bce75ebe840c" title="Preload additional containers if needed. " alt="" coords="242,165,421,221"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac7b411263200e708872bb49af2352e13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t SoftwareContainerAgent::launchCommand </td>
          <td>(</td>
          <td class="paramtype">ContainerID&#160;</td>
          <td class="paramname"><em>containerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uid_t&#160;</td>
          <td class="paramname"><em>userID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cmdLine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>workingDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const EnvironmentVariables &amp;&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(pid_t, int)&gt;&#160;</td>
          <td class="paramname"><em>listener</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Launch the given command in a the given container. </p>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00177">177</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>References <a class="el" href="softwarecontaineragent_8cpp_source.html#l00051">checkContainer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    profilefunction(<span class="stringliteral">&quot;launchCommandFunction&quot;</span>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *container;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">checkContainer</a>(containerID, container)) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="keyword">auto</span> job = <span class="keyword">new</span> <a class="code" href="classsoftwarecontainer_1_1_command_job.html">CommandJob</a>(*container, cmdLine);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="comment">// Capturing this leaves an open pipe for every container, even</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="comment">// after it has terminated.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment">// job-&gt;captureStdin();</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        job-&gt;setOutputFile(outputFile);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        job-&gt;setUserID(userID);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        job-&gt;setEnvironnmentVariables(env);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        job-&gt;setWorkingDirectory(workingDirectory);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        job-&gt;start();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        addProcessListener(m_connections, job-&gt;pid(), [listener](pid_t pid, <span class="keywordtype">int</span> exitCode) {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            listener(pid, exitCode);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        }, m_mainLoopContext);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        m_jobs.push_back(job);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        profilepoint(<span class="stringliteral">&quot;launchCommandEnd&quot;</span>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">return</span> job-&gt;pid();</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> INVALID_PID;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_a98efa26c7cb180df7e0d689e52fe379b"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">softwarecontainer::SoftwareContainerAgent::checkContainer</a></div><div class="ttdeci">bool checkContainer(ContainerID containerID, SoftwareContainer *&amp;container)</div><div class="ttdoc">Check whether the given containerID is valid and return a reference to the actual container...</div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00051">softwarecontaineragent.cpp:51</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html">softwarecontainer::SoftwareContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8h_source.html#l00037">softwarecontainer.h:37</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_command_job_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_command_job.html">softwarecontainer::CommandJob</a></div><div class="ttdoc">Use this class to execute a command line in a SoftwareContainer. </div><div class="ttdef"><b>Definition:</b> <a href="commandjob_8h_source.html#l00027">commandjob.h:27</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsoftwarecontainer_1_1_software_container_agent_ac7b411263200e708872bb49af2352e13_cgraph.png" border="0" usemap="#classsoftwarecontainer_1_1_software_container_agent_ac7b411263200e708872bb49af2352e13_cgraph" alt=""/></div>
<map name="classsoftwarecontainer_1_1_software_container_agent_ac7b411263200e708872bb49af2352e13_cgraph" id="classsoftwarecontainer_1_1_software_container_agent_ac7b411263200e708872bb49af2352e13_cgraph">
<area shape="rect" id="node2" href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b" title="Check whether the given containerID is valid and return a reference to the actual container..." alt="" coords="232,5,411,61"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7ea50df505b43684c4a1d82ca6cb6e82"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool softwarecontainer::JSONParser::read </td>
          <td>(</td>
          <td class="paramtype">const json_t *&#160;</td>
          <td class="paramname"><em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads a string from a JSON Object. </p>
<p>Tries to read a string value form a given JSON object using a given key. If the read is successful true will be returned and the result reference will be populated with the read value. If the string could not be read, either due to the given object does not contain the given key or the given key did not hold a string, false will be returned and the result reference will not be changed.</p>
<dl class="section return"><dt>Returns</dt><dd>True: If the string was successfully read. </dd>
<dd>
False: If the string could not be read. </dd></dl>

<p>Definition at line <a class="el" href="jsonparser_8cpp_source.html#l00026">26</a> of file <a class="el" href="jsonparser_8cpp_source.html">jsonparser.cpp</a>.</p>

<p>Referenced by <a class="el" href="envgateway_8cpp_source.html#l00035">EnvironmentGateway::readConfigElement()</a>, <a class="el" href="waylandgateway_8cpp_source.html#l00041">WaylandGateway::readConfigElement()</a>, <a class="el" href="cgroupsgateway_8cpp_source.html#l00034">CgroupsGateway::readConfigElement()</a>, <a class="el" href="filegateway_8cpp_source.html#l00031">FileGateway::readConfigElement()</a>, <a class="el" href="pulsegateway_8cpp_source.html#l00034">PulseGateway::readConfigElement()</a>, <a class="el" href="networkgateway_8cpp_source.html#l00040">NetworkGateway::readConfigElement()</a>, and <a class="el" href="devicenodegateway_8cpp_source.html#l00032">DeviceNodeGateway::readConfigElement()</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    json_t *value = json_object_get(element, key);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">if</span> (!value) {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    }</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordflow">if</span> (!json_is_string(value)) {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;json element is not a string&quot;</span>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    }</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    result = json_string_value(value);</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsoftwarecontainer_1_1_j_s_o_n_parser_a7ea50df505b43684c4a1d82ca6cb6e82_icgraph.png" border="0" usemap="#classsoftwarecontainer_1_1_j_s_o_n_parser_a7ea50df505b43684c4a1d82ca6cb6e82_icgraph" alt=""/></div>
<map name="classsoftwarecontainer_1_1_j_s_o_n_parser_a7ea50df505b43684c4a1d82ca6cb6e82_icgraph" id="classsoftwarecontainer_1_1_j_s_o_n_parser_a7ea50df505b43684c4a1d82ca6cb6e82_icgraph">
<area shape="rect" id="node2" href="class_environment_gateway.html#a6d276aa7c522c95276243f327f49abae" title="Gateway specific parsing of config elements. " alt="" coords="231,5,390,47"/><area shape="rect" id="node3" href="class_wayland_gateway.html#aa5d2ff63631d237339cd7ec7b25f7517" title="Gateway specific parsing of config elements. " alt="" coords="208,71,413,112"/><area shape="rect" id="node4" href="class_cgroups_gateway.html#a6b77885877877af00df49b5aa539592d" title="Gateway specific parsing of config elements. " alt="" coords="207,136,414,177"/><area shape="rect" id="node5" href="class_file_gateway.html#a4b3a520a2cce350f9b143138fe47ae29" title="Gateway specific parsing of config elements. " alt="" coords="197,202,424,229"/><area shape="rect" id="node6" href="class_pulse_gateway.html#a844a0451090129a4e19459e26afc8eca" title="Gateway specific parsing of config elements. " alt="" coords="217,253,404,295"/><area shape="rect" id="node7" href="class_network_gateway.html#a255e2b6c7d6b5b50fd2e096850c6f29c" title="Gateway specific parsing of config elements. " alt="" coords="208,319,413,360"/><area shape="rect" id="node8" href="class_device_node_gateway.html#a2dd67af3fe7d8a0fcd26abde8c1e3e74" title="Gateway specific parsing of config elements. " alt="" coords="230,384,391,425"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aec2365e81204446fec184fe17e573405"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool softwarecontainer::JSONParser::read </td>
          <td>(</td>
          <td class="paramtype">const json_t *&#160;</td>
          <td class="paramname"><em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads a boolean from a JSON Object. </p>
<p>Tries to read a boolean value form a given JSON object using a given key. If the read is successful true will be returned and the result reference will be populated with the read value. If the boolean could not be read, either due to the given object does not contain the given key or the given key did not hold a boolean value, false will be returned and the result reference will not be changed.</p>
<dl class="section return"><dt>Returns</dt><dd>True: If the boolean was successfully read. </dd>
<dd>
False: If the boolean could not be read. </dd></dl>

<p>Definition at line <a class="el" href="jsonparser_8cpp_source.html#l00042">42</a> of file <a class="el" href="jsonparser_8cpp_source.html">jsonparser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    json_t *value = json_object_get(element, key);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span> (!value) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    }</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span> (!json_is_boolean(value)) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;json element is not a boolean&quot;</span>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    result = json_is_true(value);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a11e43ade1f694d939bfd566b64ddd460"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool softwarecontainer::JSONParser::read </td>
          <td>(</td>
          <td class="paramtype">const json_t *&#160;</td>
          <td class="paramname"><em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads an integer from a JSON Object. </p>
<p>Tries to read an integer value form a given JSON object using a given key. If the read is successful true will be returned and the result reference will be populated with the read value. If the integer could not be read, either due to the given object does not contain the given key or the given key did not hold an integer value, false will be returned and the result reference will not be changed.</p>
<dl class="section return"><dt>Returns</dt><dd>True: If the integer was successfully read. </dd>
<dd>
False: If the integer could not be read. </dd></dl>

<p>Definition at line <a class="el" href="jsonparser_8cpp_source.html#l00058">58</a> of file <a class="el" href="jsonparser_8cpp_source.html">jsonparser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    json_t *value = json_object_get(element, key);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">if</span> (!value) {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (!json_is_integer(value)) {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;json element is not an integer&quot;</span>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    result = json_integer_value(value);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="softwarecontaineragent_8h_source.html">softwarecontaineragent.h</a></li>
<li>src/<a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>softwarecontainer</b></li><li class="navelem"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html">SoftwareContainerAgent</a></li>
    <li class="footer">Generated on Wed Oct 19 2016 13:59:00 for softwarecontainer by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
