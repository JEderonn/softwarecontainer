<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>softwarecontainer: softwarecontainer::SoftwareContainerAgent Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">softwarecontainer
   &#160;<span id="projectnumber">0.9.1-2ee6993 2016-11-03</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classsoftwarecontainer_1_1_software_container_agent.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">softwarecontainer::SoftwareContainerAgent Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A wrapper class.  
 <a href="classsoftwarecontainer_1_1_software_container_agent.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="softwarecontaineragent_8h_source.html">softwarecontaineragent.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for softwarecontainer::SoftwareContainerAgent:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent__inherit__graph.svg" width="190" height="142"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for softwarecontainer::SoftwareContainerAgent:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent__coll__graph.svg" width="190" height="142"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa0b1c03ad0f5a17d64d5faed9fb791f5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0b1c03ad0f5a17d64d5faed9fb791f5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SoftwareContainerAgent</b> (Glib::RefPtr&lt; Glib::MainContext &gt; mainLoopContext, int preloadCount, bool shutdownContainers, int shutdownTimeout)</td></tr>
<tr class="separator:aa0b1c03ad0f5a17d64d5faed9fb791f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9992fc855d1e79fb5f8d46b31a02ec87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#a9992fc855d1e79fb5f8d46b31a02ec87">deleteContainer</a> (ContainerID containerID)</td></tr>
<tr class="memdesc:a9992fc855d1e79fb5f8d46b31a02ec87"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete container by ID  <a href="#a9992fc855d1e79fb5f8d46b31a02ec87">More...</a><br /></td></tr>
<tr class="separator:a9992fc855d1e79fb5f8d46b31a02ec87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98efa26c7cb180df7e0d689e52fe379b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">checkContainer</a> (ContainerID containerID, <a class="el" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *&amp;container)</td></tr>
<tr class="memdesc:a98efa26c7cb180df7e0d689e52fe379b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the given container is valid and return a reference to the actual container.  <a href="#a98efa26c7cb180df7e0d689e52fe379b">More...</a><br /></td></tr>
<tr class="separator:a98efa26c7cb180df7e0d689e52fe379b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab15b844d7ed80339448a2005ea1cc9d"><td class="memItemLeft" align="right" valign="top">ReturnCode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#aab15b844d7ed80339448a2005ea1cc9d">readConfigElement</a> (const json_t *element)</td></tr>
<tr class="memdesc:aab15b844d7ed80339448a2005ea1cc9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to read a config in json format for a container.  <a href="#aab15b844d7ed80339448a2005ea1cc9d">More...</a><br /></td></tr>
<tr class="separator:aab15b844d7ed80339448a2005ea1cc9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a990e86f21dead80c727462618ecf0e91"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#a990e86f21dead80c727462618ecf0e91">parseConfig</a> (const std::string &amp;config)</td></tr>
<tr class="memdesc:a990e86f21dead80c727462618ecf0e91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse config needed for starting up the container in a correct manner.  <a href="#a990e86f21dead80c727462618ecf0e91">More...</a><br /></td></tr>
<tr class="separator:a990e86f21dead80c727462618ecf0e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5cafaf71af5858bb97f84c6fe1de917"><td class="memItemLeft" align="right" valign="top">ContainerID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#ac5cafaf71af5858bb97f84c6fe1de917">createContainer</a> (const std::string &amp;config)</td></tr>
<tr class="memdesc:ac5cafaf71af5858bb97f84c6fe1de917"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new container.  <a href="#ac5cafaf71af5858bb97f84c6fe1de917">More...</a><br /></td></tr>
<tr class="separator:ac5cafaf71af5858bb97f84c6fe1de917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c72e18a7d5bef69d748366c390cca5d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#a6c72e18a7d5bef69d748366c390cca5d">writeToStdIn</a> (pid_t pid, const std::vector&lt; uint8_t &gt; &amp;bytes)</td></tr>
<tr class="memdesc:a6c72e18a7d5bef69d748366c390cca5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">writes to stdin of a process inside a container  <a href="#a6c72e18a7d5bef69d748366c390cca5d">More...</a><br /></td></tr>
<tr class="separator:a6c72e18a7d5bef69d748366c390cca5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7b411263200e708872bb49af2352e13"><td class="memItemLeft" align="right" valign="top">pid_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#ac7b411263200e708872bb49af2352e13">launchCommand</a> (ContainerID containerID, uid_t userID, const std::string &amp;cmdLine, const std::string &amp;workingDirectory, const std::string &amp;outputFile, const EnvironmentVariables &amp;env, std::function&lt; void(pid_t, int)&gt; listener)</td></tr>
<tr class="memdesc:ac7b411263200e708872bb49af2352e13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Launch the given command in a the given container.  <a href="#ac7b411263200e708872bb49af2352e13">More...</a><br /></td></tr>
<tr class="separator:ac7b411263200e708872bb49af2352e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28c1a89c1020304c89f4bd153f5ee6c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#a28c1a89c1020304c89f4bd153f5ee6c0">setContainerName</a> (ContainerID containerID, const std::string &amp;name)</td></tr>
<tr class="memdesc:a28c1a89c1020304c89f4bd153f5ee6c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets the container name  <a href="#a28c1a89c1020304c89f4bd153f5ee6c0">More...</a><br /></td></tr>
<tr class="separator:a28c1a89c1020304c89f4bd153f5ee6c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ba4cee8f8672b665a22f06164bfe60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#aa2ba4cee8f8672b665a22f06164bfe60">shutdownContainer</a> (ContainerID containerID)</td></tr>
<tr class="memdesc:aa2ba4cee8f8672b665a22f06164bfe60"><td class="mdescLeft">&#160;</td><td class="mdescRight">shuts down a container  <a href="#aa2ba4cee8f8672b665a22f06164bfe60">More...</a><br /></td></tr>
<tr class="separator:aa2ba4cee8f8672b665a22f06164bfe60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acff22e38c79ba4242872fbc96b3cbdbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#acff22e38c79ba4242872fbc96b3cbdbe">shutdownContainer</a> (ContainerID containerID, unsigned int timeout)</td></tr>
<tr class="memdesc:acff22e38c79ba4242872fbc96b3cbdbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">shuts down a container with a custom timeout  <a href="#acff22e38c79ba4242872fbc96b3cbdbe">More...</a><br /></td></tr>
<tr class="separator:acff22e38c79ba4242872fbc96b3cbdbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3e6e3cab9bad8db6f5ed87deeffd3a2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#ad3e6e3cab9bad8db6f5ed87deeffd3a2">bindMountFolderInContainer</a> (const uint32_t containerID, const std::string &amp;pathInHost, const std::string &amp;subPathInContainer, bool readOnly)</td></tr>
<tr class="memdesc:ad3e6e3cab9bad8db6f5ed87deeffd3a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bind mount a folder into the container.  <a href="#ad3e6e3cab9bad8db6f5ed87deeffd3a2">More...</a><br /></td></tr>
<tr class="separator:ad3e6e3cab9bad8db6f5ed87deeffd3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19799cb9be607a08a674179713adcf8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#ae19799cb9be607a08a674179713adcf8">setGatewayConfigs</a> (const uint32_t &amp;containerID, const std::map&lt; std::string, std::string &gt; &amp;configs)</td></tr>
<tr class="memdesc:ae19799cb9be607a08a674179713adcf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set configuration for the container gateways.  <a href="#ae19799cb9be607a08a674179713adcf8">More...</a><br /></td></tr>
<tr class="separator:ae19799cb9be607a08a674179713adcf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7470dd1bebcb73196b07d13f1e4f2b81"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#a7470dd1bebcb73196b07d13f1e4f2b81">setCapabilities</a> (const uint32_t &amp;containerID, const std::vector&lt; std::string &gt; &amp;capabilities)</td></tr>
<tr class="memdesc:a7470dd1bebcb73196b07d13f1e4f2b81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set capabilities for the container.  <a href="#a7470dd1bebcb73196b07d13f1e4f2b81">More...</a><br /></td></tr>
<tr class="separator:a7470dd1bebcb73196b07d13f1e4f2b81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4a978edc41a3e89132d1aa55dd4210"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classsoftwarecontainer_1_1_workspace.html">Workspace</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html#abf4a978edc41a3e89132d1aa55dd4210">getWorkspace</a> ()</td></tr>
<tr class="memdesc:abf4a978edc41a3e89132d1aa55dd4210"><td class="mdescLeft">&#160;</td><td class="mdescRight">get a pointer to the workspace used TODO: This is only used for testing  <a href="#abf4a978edc41a3e89132d1aa55dd4210">More...</a><br /></td></tr>
<tr class="separator:abf4a978edc41a3e89132d1aa55dd4210"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a7ea50df505b43684c4a1d82ca6cb6e82"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_j_s_o_n_parser.html#a7ea50df505b43684c4a1d82ca6cb6e82">read</a> (const json_t *element, const char *key, std::string &amp;result)</td></tr>
<tr class="memdesc:a7ea50df505b43684c4a1d82ca6cb6e82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a string from a JSON Object.  <a href="#a7ea50df505b43684c4a1d82ca6cb6e82">More...</a><br /></td></tr>
<tr class="separator:a7ea50df505b43684c4a1d82ca6cb6e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2365e81204446fec184fe17e573405"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_j_s_o_n_parser.html#aec2365e81204446fec184fe17e573405">read</a> (const json_t *element, const char *key, bool &amp;result)</td></tr>
<tr class="memdesc:aec2365e81204446fec184fe17e573405"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a boolean from a JSON Object.  <a href="#aec2365e81204446fec184fe17e573405">More...</a><br /></td></tr>
<tr class="separator:aec2365e81204446fec184fe17e573405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11e43ade1f694d939bfd566b64ddd460"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_j_s_o_n_parser.html#a11e43ade1f694d939bfd566b64ddd460">read</a> (const json_t *element, const char *key, int &amp;result)</td></tr>
<tr class="memdesc:a11e43ade1f694d939bfd566b64ddd460"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an integer from a JSON Object.  <a href="#a11e43ade1f694d939bfd566b64ddd460">More...</a><br /></td></tr>
<tr class="separator:a11e43ade1f694d939bfd566b64ddd460"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A wrapper class. </p>

<p>Definition at line <a class="el" href="softwarecontaineragent_8h_source.html#l00060">60</a> of file <a class="el" href="softwarecontaineragent_8h_source.html">softwarecontaineragent.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9992fc855d1e79fb5f8d46b31a02ec87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SoftwareContainerAgent::deleteContainer </td>
          <td>(</td>
          <td class="paramtype">ContainerID&#160;</td>
          <td class="paramname"><em>containerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>delete container by ID </p>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00055">55</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>Referenced by <a class="el" href="softwarecontaineragent_8cpp_source.html#l00249">shutdownContainer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;{</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span> (isIdValid(containerID)) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        m_containers.erase(containerID);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        m_containerIdPool.push_back(containerID);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;Invalid container ID &quot;</span> &lt;&lt; containerID;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_a9992fc855d1e79fb5f8d46b31a02ec87_icgraph.svg" width="416" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a98efa26c7cb180df7e0d689e52fe379b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SoftwareContainerAgent::checkContainer </td>
          <td>(</td>
          <td class="paramtype">ContainerID&#160;</td>
          <td class="paramname"><em>containerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *&amp;&#160;</td>
          <td class="paramname"><em>container</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether the given container is valid and return a reference to the actual container. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">containerID</td><td>the ID for the container </td></tr>
    <tr><td class="paramname">container</td><td>a pointer to a container object (out parameter) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00065">65</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>Referenced by <a class="el" href="softwarecontaineragent_8cpp_source.html#l00263">bindMountFolderInContainer()</a>, <a class="el" href="softwarecontaineragent_8cpp_source.html#l00209">launchCommand()</a>, <a class="el" href="softwarecontaineragent_8cpp_source.html#l00236">setContainerName()</a>, <a class="el" href="softwarecontaineragent_8cpp_source.html#l00280">setGatewayConfigs()</a>, and <a class="el" href="softwarecontaineragent_8cpp_source.html#l00249">shutdownContainer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (isIdValid(containerID)) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        container = m_containers[containerID].get();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;Invalid container ID &quot;</span> &lt;&lt; containerID;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_a98efa26c7cb180df7e0d689e52fe379b_icgraph.svg" width="447" height="387"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aab15b844d7ed80339448a2005ea1cc9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ReturnCode SoftwareContainerAgent::readConfigElement </td>
          <td>(</td>
          <td class="paramtype">const json_t *&#160;</td>
          <td class="paramname"><em>element</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to read a config in json format for a container. </p>
<p>One can pass options to the agent when creating containers, options that are not gateway specific. These options will be read by this function</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">element</td><td>a config snippet in json format </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ReturnCode::SUCCESS </dd></dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00077">77</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>References <a class="el" href="jsonparser_8cpp_source.html#l00024">softwarecontainer::JSONParser::read()</a>.</p>

<p>Referenced by <a class="el" href="softwarecontaineragent_8cpp_source.html#l00087">parseConfig()</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">bool</span> wo = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classsoftwarecontainer_1_1_j_s_o_n_parser.html#a7ea50df505b43684c4a1d82ca6cb6e82">read</a>(element, <span class="stringliteral">&quot;enableWriteBuffer&quot;</span>, wo)) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        log_debug() &lt;&lt; <span class="stringliteral">&quot;enableWriteBuffer not found&quot;</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    m_softwarecontainerWorkspace-&gt;m_enableWriteBuffer = wo;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">return</span> ReturnCode::SUCCESS;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_j_s_o_n_parser_html_a7ea50df505b43684c4a1d82ca6cb6e82"><div class="ttname"><a href="classsoftwarecontainer_1_1_j_s_o_n_parser.html#a7ea50df505b43684c4a1d82ca6cb6e82">softwarecontainer::JSONParser::read</a></div><div class="ttdeci">bool read(const json_t *element, const char *key, std::string &amp;result)</div><div class="ttdoc">Reads a string from a JSON Object. </div><div class="ttdef"><b>Definition:</b> <a href="jsonparser_8cpp_source.html#l00024">jsonparser.cpp:24</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_aab15b844d7ed80339448a2005ea1cc9d_cgraph.svg" width="382" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_aab15b844d7ed80339448a2005ea1cc9d_icgraph.svg" width="643" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a990e86f21dead80c727462618ecf0e91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SoftwareContainerAgent::parseConfig </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse config needed for starting up the container in a correct manner. </p>
<p>This reads a config string into json format, makes sure it is formatted correctly, and then calls readConfigElement for its elements.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>a configuration string </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00087">87</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>References <a class="el" href="softwarecontaineragent_8cpp_source.html#l00077">readConfigElement()</a>.</p>

<p>Referenced by <a class="el" href="softwarecontaineragent_8cpp_source.html#l00144">createContainer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span> (config.size() == 0) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        log_warning() &lt;&lt; <span class="stringliteral">&quot;No configuration interpreted&quot;</span>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    json_error_t error;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    json_t *root = json_loads(config.c_str(), 0, &amp;error);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">if</span> (!root) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;Could not parse config: &quot;</span> &lt;&lt; error.text;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        log_error() &lt;&lt; config;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (json_is_array(root)) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordtype">size_t</span> index;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        json_t *element;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        json_array_foreach(root, index, element) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="keywordflow">if</span> (json_is_object(element)) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">if</span> (isError(<a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#aab15b844d7ed80339448a2005ea1cc9d">readConfigElement</a>(element))) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    log_error() &lt;&lt; <span class="stringliteral">&quot;Could not read config element&quot;</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                log_error() &lt;&lt; <span class="stringliteral">&quot;json configuration is not an object&quot;</span>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;Root JSON element is not an array&quot;</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_aab15b844d7ed80339448a2005ea1cc9d"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#aab15b844d7ed80339448a2005ea1cc9d">softwarecontainer::SoftwareContainerAgent::readConfigElement</a></div><div class="ttdeci">ReturnCode readConfigElement(const json_t *element)</div><div class="ttdoc">Tries to read a config in json format for a container. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00077">softwarecontaineragent.cpp:77</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_a990e86f21dead80c727462618ecf0e91_cgraph.svg" width="608" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_a990e86f21dead80c727462618ecf0e91_icgraph.svg" width="416" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac5cafaf71af5858bb97f84c6fe1de917"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ContainerID SoftwareContainerAgent::createContainer </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new container. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>container-wide configuration string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the container is successfully created a positive ContainerID representing the newly created container will be returned. Otherwise, -1 will be returned. </dd></dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00144">144</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>References <a class="el" href="softwarecontaineragent_8cpp_source.html#l00087">parseConfig()</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    profilepoint(<span class="stringliteral">&quot;createContainerStart&quot;</span>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    profilefunction(<span class="stringliteral">&quot;createContainerFunction&quot;</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#a990e86f21dead80c727462618ecf0e91">parseConfig</a>(config)) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;The provided config could not be successfully parsed.&quot;</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    std::pair&lt;ContainerID, SoftwareContainerPtr&gt; pair = std::move(getContainerPair());</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    pair.second-&gt;setMainLoopContext(m_mainLoopContext);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (isError(pair.second-&gt;init())) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;Could not init the container.&quot;</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// TODO: Would be nice if this could be done async.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (!triggerPreload()) {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        log_warning() &lt;&lt; <span class="stringliteral">&quot;Failed to preload a new container.&quot;</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    m_containers.insert(std::move(pair));</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// Return the ContainerID for the container</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> pair.first;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_a990e86f21dead80c727462618ecf0e91"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#a990e86f21dead80c727462618ecf0e91">softwarecontainer::SoftwareContainerAgent::parseConfig</a></div><div class="ttdeci">bool parseConfig(const std::string &amp;config)</div><div class="ttdoc">Parse config needed for starting up the container in a correct manner. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00087">softwarecontaineragent.cpp:87</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_ac5cafaf71af5858bb97f84c6fe1de917_cgraph.svg" width="835" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6c72e18a7d5bef69d748366c390cca5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SoftwareContainerAgent::writeToStdIn </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>writes to stdin of a process inside a container </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>the pid of the process (must be created through launchCommand) </td></tr>
    <tr><td class="paramname">bytes</td><td>the bytes to write to stdin </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00200">200</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="classsoftwarecontainer_1_1_command_job.html">CommandJob</a> *job = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (checkJob(pid, job)) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        log_debug() &lt;&lt; <span class="stringliteral">&quot;writing bytes to process with PID:&quot;</span> &lt;&lt; job-&gt;pid() &lt;&lt; <span class="stringliteral">&quot; : &quot;</span> &lt;&lt; bytes;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        write(job-&gt;stdin(), bytes.data(), bytes.size());</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_command_job_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_command_job.html">softwarecontainer::CommandJob</a></div><div class="ttdoc">Use this class to execute a command line in a SoftwareContainer. </div><div class="ttdef"><b>Definition:</b> <a href="commandjob_8h_source.html#l00027">commandjob.h:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac7b411263200e708872bb49af2352e13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t SoftwareContainerAgent::launchCommand </td>
          <td>(</td>
          <td class="paramtype">ContainerID&#160;</td>
          <td class="paramname"><em>containerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uid_t&#160;</td>
          <td class="paramname"><em>userID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>cmdLine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>workingDirectory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>outputFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const EnvironmentVariables &amp;&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void(pid_t, int)&gt;&#160;</td>
          <td class="paramname"><em>listener</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Launch the given command in a the given container. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">containerID</td><td>the id for the container </td></tr>
    <tr><td class="paramname">userID</td><td>the userID to use when running the command inside the container </td></tr>
    <tr><td class="paramname">cmdLine</td><td>the command to run </td></tr>
    <tr><td class="paramname">workingDirectory</td><td>the working directory to use when running </td></tr>
    <tr><td class="paramname">outputFile</td><td>where to log any output </td></tr>
    <tr><td class="paramname">env</td><td>any environment variables to pass to the command </td></tr>
    <tr><td class="paramname">listener</td><td>a function that runs when the process exits </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00209">209</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>References <a class="el" href="softwarecontaineragent_8cpp_source.html#l00065">checkContainer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    profilefunction(<span class="stringliteral">&quot;launchCommandFunction&quot;</span>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *container;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">checkContainer</a>(containerID, container)) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keyword">auto</span> job = <span class="keyword">new</span> <a class="code" href="classsoftwarecontainer_1_1_command_job.html">CommandJob</a>(*container, cmdLine);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// Capturing this leaves an open pipe for every container, even</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="comment">// after it has terminated.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">// job-&gt;captureStdin();</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        job-&gt;setOutputFile(outputFile);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        job-&gt;setUserID(userID);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        job-&gt;setEnvironmentVariables(env);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        job-&gt;setWorkingDirectory(workingDirectory);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        job-&gt;start();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        addProcessListener(m_connections, job-&gt;pid(), [listener](pid_t pid, <span class="keywordtype">int</span> exitCode) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            listener(pid, exitCode);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }, m_mainLoopContext);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        m_jobs.push_back(job);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        profilepoint(<span class="stringliteral">&quot;launchCommandEnd&quot;</span>);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">return</span> job-&gt;pid();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">return</span> INVALID_PID;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_a98efa26c7cb180df7e0d689e52fe379b"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">softwarecontainer::SoftwareContainerAgent::checkContainer</a></div><div class="ttdeci">bool checkContainer(ContainerID containerID, SoftwareContainer *&amp;container)</div><div class="ttdoc">Check whether the given container is valid and return a reference to the actual container. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00065">softwarecontaineragent.cpp:65</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html">softwarecontainer::SoftwareContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8h_source.html#l00037">softwarecontainer.h:37</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_command_job_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_command_job.html">softwarecontainer::CommandJob</a></div><div class="ttdoc">Use this class to execute a command line in a SoftwareContainer. </div><div class="ttdef"><b>Definition:</b> <a href="commandjob_8h_source.html#l00027">commandjob.h:27</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_ac7b411263200e708872bb49af2352e13_cgraph.svg" width="416" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a28c1a89c1020304c89f4bd153f5ee6c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SoftwareContainerAgent::setContainerName </td>
          <td>(</td>
          <td class="paramtype">ContainerID&#160;</td>
          <td class="paramname"><em>containerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sets the container name </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">containerID</td><td>the id for the container </td></tr>
    <tr><td class="paramname">name</td><td>the name to set </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00236">236</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>References <a class="el" href="softwarecontaineragent_8cpp_source.html#l00065">checkContainer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;{</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *container = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">checkContainer</a>(containerID, container)) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        container-&gt;setContainerName(name);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_a98efa26c7cb180df7e0d689e52fe379b"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">softwarecontainer::SoftwareContainerAgent::checkContainer</a></div><div class="ttdeci">bool checkContainer(ContainerID containerID, SoftwareContainer *&amp;container)</div><div class="ttdoc">Check whether the given container is valid and return a reference to the actual container. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00065">softwarecontaineragent.cpp:65</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html">softwarecontainer::SoftwareContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8h_source.html#l00037">softwarecontainer.h:37</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_a28c1a89c1020304c89f4bd153f5ee6c0_cgraph.svg" width="416" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa2ba4cee8f8672b665a22f06164bfe60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SoftwareContainerAgent::shutdownContainer </td>
          <td>(</td>
          <td class="paramtype">ContainerID&#160;</td>
          <td class="paramname"><em>containerID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>shuts down a container </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">containerID</td><td>the container to shut down </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00244">244</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#aa2ba4cee8f8672b665a22f06164bfe60">shutdownContainer</a>(containerID, m_softwarecontainerWorkspace-&gt;m_containerShutdownTimeout);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_aa2ba4cee8f8672b665a22f06164bfe60"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#aa2ba4cee8f8672b665a22f06164bfe60">softwarecontainer::SoftwareContainerAgent::shutdownContainer</a></div><div class="ttdeci">void shutdownContainer(ContainerID containerID)</div><div class="ttdoc">shuts down a container </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00244">softwarecontaineragent.cpp:244</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acff22e38c79ba4242872fbc96b3cbdbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SoftwareContainerAgent::shutdownContainer </td>
          <td>(</td>
          <td class="paramtype">ContainerID&#160;</td>
          <td class="paramname"><em>containerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>shuts down a container with a custom timeout </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">containerID</td><td>the container to shut down </td></tr>
    <tr><td class="paramname">timeout</td><td>timeout in seconds to wait before forcing </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00249">249</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>References <a class="el" href="softwarecontaineragent_8cpp_source.html#l00065">checkContainer()</a>, <a class="el" href="softwarecontaineragent_8cpp_source.html#l00055">deleteContainer()</a>, and <a class="el" href="softwarecontainer_8cpp_source.html#l00180">softwarecontainer::SoftwareContainer::shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    profilefunction(<span class="stringliteral">&quot;shutdownContainerFunction&quot;</span>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (m_shutdownContainers) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *container = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">checkContainer</a>(containerID, container)) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            container-&gt;<a class="code" href="classsoftwarecontainer_1_1_software_container.html#ab7f458bb2d29ef1a99c3aae09188a0d4">shutdown</a>(timeout);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#a9992fc855d1e79fb5f8d46b31a02ec87">deleteContainer</a>(containerID);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        log_info() &lt;&lt; <span class="stringliteral">&quot;Not shutting down container&quot;</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html_ab7f458bb2d29ef1a99c3aae09188a0d4"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html#ab7f458bb2d29ef1a99c3aae09188a0d4">softwarecontainer::SoftwareContainer::shutdown</a></div><div class="ttdeci">ReturnCode shutdown()</div><div class="ttdoc">Shutdown the container. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8cpp_source.html#l00180">softwarecontainer.cpp:180</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_a98efa26c7cb180df7e0d689e52fe379b"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">softwarecontainer::SoftwareContainerAgent::checkContainer</a></div><div class="ttdeci">bool checkContainer(ContainerID containerID, SoftwareContainer *&amp;container)</div><div class="ttdoc">Check whether the given container is valid and return a reference to the actual container. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00065">softwarecontaineragent.cpp:65</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_a9992fc855d1e79fb5f8d46b31a02ec87"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#a9992fc855d1e79fb5f8d46b31a02ec87">softwarecontainer::SoftwareContainerAgent::deleteContainer</a></div><div class="ttdeci">void deleteContainer(ContainerID containerID)</div><div class="ttdoc">delete container by ID </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00055">softwarecontaineragent.cpp:55</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html">softwarecontainer::SoftwareContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8h_source.html#l00037">softwarecontainer.h:37</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_acff22e38c79ba4242872fbc96b3cbdbe_cgraph.svg" width="447" height="212"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad3e6e3cab9bad8db6f5ed87deeffd3a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string SoftwareContainerAgent::bindMountFolderInContainer </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>containerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pathInHost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>subPathInContainer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>readOnly</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bind mount a folder into the container. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">containerID</td><td>the container to bind into </td></tr>
    <tr><td class="paramname">pathInHost</td><td>path to the folder in the host system </td></tr>
    <tr><td class="paramname">subPathInContainer</td><td>path (relative to a fixed start point) to use in the container </td></tr>
    <tr><td class="paramname">readOnly</td><td>whether or not to mount read-only</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the full path of the mounted folder in the container </dd></dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00263">263</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>References <a class="el" href="softwarecontaineragent_8cpp_source.html#l00065">checkContainer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;{</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    profilefunction(<span class="stringliteral">&quot;bindMountFolderInContainerFunction&quot;</span>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *container = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">checkContainer</a>(containerID, container)) {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        std::string path;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        ReturnCode result = container-&gt;getContainer()-&gt;bindMountFolderInContainer(pathInHost, subPathInContainer, path, readOnly);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">if</span> (isError(result)) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            log_error() &lt;&lt; <span class="stringliteral">&quot;Unable to bind mount folder &quot;</span> &lt;&lt; pathInHost &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; subPathInContainer;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="keywordflow">return</span> path;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_a98efa26c7cb180df7e0d689e52fe379b"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">softwarecontainer::SoftwareContainerAgent::checkContainer</a></div><div class="ttdeci">bool checkContainer(ContainerID containerID, SoftwareContainer *&amp;container)</div><div class="ttdoc">Check whether the given container is valid and return a reference to the actual container. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00065">softwarecontaineragent.cpp:65</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html">softwarecontainer::SoftwareContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8h_source.html#l00037">softwarecontainer.h:37</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_ad3e6e3cab9bad8db6f5ed87deeffd3a2_cgraph.svg" width="447" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae19799cb9be607a08a674179713adcf8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SoftwareContainerAgent::setGatewayConfigs </td>
          <td>(</td>
          <td class="paramtype">const uint32_t &amp;&#160;</td>
          <td class="paramname"><em>containerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::map&lt; std::string, std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>configs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set configuration for the container gateways. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">containerID</td><td>the container to use </td></tr>
    <tr><td class="paramname">configs</td><td>a mapping from gateway-ids to configuration strings to send to the container </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00280">280</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>

<p>References <a class="el" href="softwarecontaineragent_8cpp_source.html#l00065">checkContainer()</a>, and <a class="el" href="softwarecontainer_8cpp_source.html#l00151">softwarecontainer::SoftwareContainer::updateGatewayConfiguration()</a>.</p>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;{</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    profilefunction(<span class="stringliteral">&quot;setGatewayConfigsFunction&quot;</span>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="classsoftwarecontainer_1_1_software_container.html">SoftwareContainer</a> *container = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">checkContainer</a>(containerID, container)) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        container-&gt;<a class="code" href="classsoftwarecontainer_1_1_software_container.html#a7db71d975b5bbfebe48e50769cf726b9">updateGatewayConfiguration</a>(configs);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;}</div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html_a7db71d975b5bbfebe48e50769cf726b9"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html#a7db71d975b5bbfebe48e50769cf726b9">softwarecontainer::SoftwareContainer::updateGatewayConfiguration</a></div><div class="ttdeci">void updateGatewayConfiguration(const GatewayConfiguration &amp;configs)</div><div class="ttdoc">Continues the &#39;launch&#39; phase by allowing gateway configurations to be set. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8cpp_source.html#l00151">softwarecontainer.cpp:151</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_agent_html_a98efa26c7cb180df7e0d689e52fe379b"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container_agent.html#a98efa26c7cb180df7e0d689e52fe379b">softwarecontainer::SoftwareContainerAgent::checkContainer</a></div><div class="ttdeci">bool checkContainer(ContainerID containerID, SoftwareContainer *&amp;container)</div><div class="ttdoc">Check whether the given container is valid and return a reference to the actual container. </div><div class="ttdef"><b>Definition:</b> <a href="softwarecontaineragent_8cpp_source.html#l00065">softwarecontaineragent.cpp:65</a></div></div>
<div class="ttc" id="classsoftwarecontainer_1_1_software_container_html"><div class="ttname"><a href="classsoftwarecontainer_1_1_software_container.html">softwarecontainer::SoftwareContainer</a></div><div class="ttdef"><b>Definition:</b> <a href="softwarecontainer_8h_source.html#l00037">softwarecontainer.h:37</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_software_container_agent_ae19799cb9be607a08a674179713adcf8_cgraph.svg" width="1222" height="208"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7470dd1bebcb73196b07d13f1e4f2b81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SoftwareContainerAgent::setCapabilities </td>
          <td>(</td>
          <td class="paramtype">const uint32_t &amp;&#160;</td>
          <td class="paramname"><em>containerID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>capabilities</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set capabilities for the container. </p>
<p>Capabilities are a mapping from a string to a set of gateway configurations. Capabilities are translated into gateway configurations and then sent the same way as with setGatewayConfigs</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">containerID</td><td>the container to use </td></tr>
    <tr><td class="paramname">capabilities</td><td>the capabilities</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00289">289</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;{</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abf4a978edc41a3e89132d1aa55dd4210"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classsoftwarecontainer_1_1_workspace.html">Workspace</a> &gt; SoftwareContainerAgent::getWorkspace </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get a pointer to the workspace used TODO: This is only used for testing </p>
<dl class="section return"><dt>Returns</dt><dd>a shared pointer to the current workspace </dd></dl>

<p>Definition at line <a class="el" href="softwarecontaineragent_8cpp_source.html#l00295">295</a> of file <a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> m_softwarecontainerWorkspace;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7ea50df505b43684c4a1d82ca6cb6e82"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool softwarecontainer::JSONParser::read </td>
          <td>(</td>
          <td class="paramtype">const json_t *&#160;</td>
          <td class="paramname"><em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads a string from a JSON Object. </p>
<p>Tries to read a string value form a given JSON object using a given key. If the read is successful true will be returned and the result reference will be populated with the read value. If the string could not be read, either due to the given object does not contain the given key or the given key did not hold a string, false will be returned and the result reference will not be changed.</p>
<dl class="section return"><dt>Returns</dt><dd>True: If the string was successfully read. </dd>
<dd>
False: If the string could not be read. </dd></dl>

<p>Definition at line <a class="el" href="jsonparser_8cpp_source.html#l00024">24</a> of file <a class="el" href="jsonparser_8cpp_source.html">jsonparser.cpp</a>.</p>

<p>Referenced by <a class="el" href="envgateway_8cpp_source.html#l00035">EnvironmentGateway::readConfigElement()</a>, <a class="el" href="waylandgateway_8cpp_source.html#l00041">WaylandGateway::readConfigElement()</a>, <a class="el" href="cgroupsgateway_8cpp_source.html#l00034">CgroupsGateway::readConfigElement()</a>, <a class="el" href="filegateway_8cpp_source.html#l00031">FileGateway::readConfigElement()</a>, <a class="el" href="pulsegateway_8cpp_source.html#l00034">PulseGateway::readConfigElement()</a>, <a class="el" href="devicenodegateway_8cpp_source.html#l00032">DeviceNodeGateway::readConfigElement()</a>, and <a class="el" href="softwarecontaineragent_8cpp_source.html#l00077">readConfigElement()</a>.</p>
<div class="fragment"><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;{</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    json_t *value = json_object_get(element, key);</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="keywordflow">if</span> (!value) {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    }</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">if</span> (!json_is_string(value)) {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;json element is not a string&quot;</span>;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    }</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    result = json_string_value(value);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classsoftwarecontainer_1_1_j_s_o_n_parser_a7ea50df505b43684c4a1d82ca6cb6e82_icgraph.svg" width="883" height="446"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="aec2365e81204446fec184fe17e573405"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool softwarecontainer::JSONParser::read </td>
          <td>(</td>
          <td class="paramtype">const json_t *&#160;</td>
          <td class="paramname"><em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads a boolean from a JSON Object. </p>
<p>Tries to read a boolean value form a given JSON object using a given key. If the read is successful true will be returned and the result reference will be populated with the read value. If the boolean could not be read, either due to the given object does not contain the given key or the given key did not hold a boolean value, false will be returned and the result reference will not be changed.</p>
<dl class="section return"><dt>Returns</dt><dd>True: If the boolean was successfully read. </dd>
<dd>
False: If the boolean could not be read. </dd></dl>

<p>Definition at line <a class="el" href="jsonparser_8cpp_source.html#l00040">40</a> of file <a class="el" href="jsonparser_8cpp_source.html">jsonparser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    json_t *value = json_object_get(element, key);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">if</span> (!value) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    }</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">if</span> (!json_is_boolean(value)) {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;json element is not a boolean&quot;</span>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    result = json_is_true(value);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a11e43ade1f694d939bfd566b64ddd460"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool softwarecontainer::JSONParser::read </td>
          <td>(</td>
          <td class="paramtype">const json_t *&#160;</td>
          <td class="paramname"><em>element</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads an integer from a JSON Object. </p>
<p>Tries to read an integer value form a given JSON object using a given key. If the read is successful true will be returned and the result reference will be populated with the read value. If the integer could not be read, either due to the given object does not contain the given key or the given key did not hold an integer value, false will be returned and the result reference will not be changed.</p>
<dl class="section return"><dt>Returns</dt><dd>True: If the integer was successfully read. </dd>
<dd>
False: If the integer could not be read. </dd></dl>

<p>Definition at line <a class="el" href="jsonparser_8cpp_source.html#l00056">56</a> of file <a class="el" href="jsonparser_8cpp_source.html">jsonparser.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    json_t *value = json_object_get(element, key);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">if</span> (!value) {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    }</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (!json_is_integer(value)) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        log_error() &lt;&lt; <span class="stringliteral">&quot;json element is not an integer&quot;</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    result = json_integer_value(value);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>agent/src/<a class="el" href="softwarecontaineragent_8h_source.html">softwarecontaineragent.h</a></li>
<li>agent/src/<a class="el" href="softwarecontaineragent_8cpp_source.html">softwarecontaineragent.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>softwarecontainer</b></li><li class="navelem"><a class="el" href="classsoftwarecontainer_1_1_software_container_agent.html">SoftwareContainerAgent</a></li>
    <li class="footer">Generated on Thu Nov 3 2016 12:08:28 for softwarecontainer by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
