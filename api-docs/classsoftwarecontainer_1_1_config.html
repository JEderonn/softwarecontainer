<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>softwarecontainer: softwarecontainer::Config Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">softwarecontainer
   &#160;<span id="projectnumber">0.18.0-cfffea9 2017-03-06</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classsoftwarecontainer_1_1_config.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">softwarecontainer::Config Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents the configuration of <a class="el" href="classsoftwarecontainer_1_1_software_container.html" title="An abstraction of concrete container implementations. ">SoftwareContainer</a> (the component)  
 <a href="classsoftwarecontainer_1_1_config.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="config_8h_source.html">config.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab42ae116ce9fb0d7ae62709547cc0802"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_config.html#ab42ae116ce9fb0d7ae62709547cc0802">Config</a> (std::vector&lt; std::unique_ptr&lt; <a class="el" href="classsoftwarecontainer_1_1_config_source.html">ConfigSource</a> &gt;&gt; sources, MandatoryConfigs mandatory, ConfigDependencies dependencies)</td></tr>
<tr class="memdesc:ab42ae116ce9fb0d7ae62709547cc0802"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor - retrieves all configs from the available sources.  <a href="#ab42ae116ce9fb0d7ae62709547cc0802">More...</a><br /></td></tr>
<tr class="separator:ab42ae116ce9fb0d7ae62709547cc0802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7f2e47598dbdc585d4e15257477493c"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_config.html#aa7f2e47598dbdc585d4e15257477493c">getStringValue</a> (const std::string &amp;group, const std::string &amp;key) const </td></tr>
<tr class="memdesc:aa7f2e47598dbdc585d4e15257477493c"><td class="mdescLeft">&#160;</td><td class="mdescRight">getStringValue Get a config value of type string  <a href="#aa7f2e47598dbdc585d4e15257477493c">More...</a><br /></td></tr>
<tr class="separator:aa7f2e47598dbdc585d4e15257477493c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a95daa6a9318611f35dff757d3fd98"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_config.html#a76a95daa6a9318611f35dff757d3fd98">getIntValue</a> (const std::string &amp;group, const std::string &amp;key) const </td></tr>
<tr class="memdesc:a76a95daa6a9318611f35dff757d3fd98"><td class="mdescLeft">&#160;</td><td class="mdescRight">getIntValue Get a config value of type int  <a href="#a76a95daa6a9318611f35dff757d3fd98">More...</a><br /></td></tr>
<tr class="separator:a76a95daa6a9318611f35dff757d3fd98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4124e2115ae8de964d4c69a6626c4b8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsoftwarecontainer_1_1_config.html#ad4124e2115ae8de964d4c69a6626c4b8">getBoolValue</a> (const std::string &amp;group, const std::string &amp;key) const </td></tr>
<tr class="memdesc:ad4124e2115ae8de964d4c69a6626c4b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">getBoolValue Get a config value of type bool  <a href="#ad4124e2115ae8de964d4c69a6626c4b8">More...</a><br /></td></tr>
<tr class="separator:ad4124e2115ae8de964d4c69a6626c4b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents the configuration of <a class="el" href="classsoftwarecontainer_1_1_software_container.html" title="An abstraction of concrete container implementations. ">SoftwareContainer</a> (the component) </p>
<p><a class="el" href="classsoftwarecontainer_1_1_config.html" title="Represents the configuration of SoftwareContainer (the component) ">Config</a> gathers all config items present from config sources, and provides the values for these configs when asked. <a class="el" href="classsoftwarecontainer_1_1_config.html" title="Represents the configuration of SoftwareContainer (the component) ">Config</a> handles logic for what is to be considered mandatory or optional, and dependencies between configs.</p>
<p><a class="el" href="classsoftwarecontainer_1_1_config.html" title="Represents the configuration of SoftwareContainer (the component) ">Config</a> reads all config items from the sources on creation, and stores them for retrieval when users of <a class="el" href="classsoftwarecontainer_1_1_config.html" title="Represents the configuration of SoftwareContainer (the component) ">Config</a> asks for a config value.</p>
<p><a class="el" href="classsoftwarecontainer_1_1_config.html" title="Represents the configuration of SoftwareContainer (the component) ">Config</a> item uniqueness is based on the combination of config group and config key. Therefore, it is OK to have the same key in multiple groups, but a key must be unique within a group.</p>
<p>Some configs are optional and some are mandatory. A config can become mandatory if some other specified config depends on it. E.g. if an optional config in the main config file is uncommented and thus used, it might mean that other configs are mandatory as a consequence.</p>
<p>It is an error if a mandatory config can not be found or if one or more dependencies to a config can not be found.</p>
<p>There are three different config sources:</p><ul>
<li>Command line options</li>
<li>Main config file</li>
<li>Defaults</li>
</ul>
<p>The config sources as considered in the above order, i.e. first command line options, then the main config file etc. If a config was retrieved from more than one source, i.e. duplicates, only the value of the highest prioritized source will be returned, and the other(s) ignored.</p>
<p>It is an error if a config requested by the user of <a class="el" href="classsoftwarecontainer_1_1_config.html" title="Represents the configuration of SoftwareContainer (the component) ">Config</a> is not found, even if the config is optional. </p>

<p>Definition at line <a class="el" href="config_8h_source.html#l00067">67</a> of file <a class="el" href="config_8h_source.html">config.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab42ae116ce9fb0d7ae62709547cc0802"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">softwarecontainer::Config::Config </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; std::unique_ptr&lt; <a class="el" href="classsoftwarecontainer_1_1_config_source.html">ConfigSource</a> &gt;&gt;&#160;</td>
          <td class="paramname"><em>sources</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MandatoryConfigs&#160;</td>
          <td class="paramname"><em>mandatory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ConfigDependencies&#160;</td>
          <td class="paramname"><em>dependencies</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor - retrieves all configs from the available sources. </p>
<p>This constructor retrieves all <a class="el" href="classsoftwarecontainer_1_1_config_item.html" title="Base class for all config item types. ">ConfigItem</a> objects from the available config sources, and keeps them for later access by users of <a class="el" href="classsoftwarecontainer_1_1_config.html" title="Represents the configuration of SoftwareContainer (the component) ">Config</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sources</td><td>A list of config sources implementing the <a class="el" href="classsoftwarecontainer_1_1_config_source.html" title="Base class for all config sources. ">ConfigSource</a> interface </td></tr>
    <tr><td class="paramname">mandatory</td><td>Configs that are to be considered mandatory </td></tr>
    <tr><td class="paramname">dependencies</td><td>Dependee configs and their respective dependencies</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classsoftwarecontainer_1_1_config_mandatory_error.html">ConfigMandatoryError</a></td><td>If any mandatory config is missing, i.e. it is not returned by any config source.</td></tr>
    <tr><td class="paramname"><a class="el" href="classsoftwarecontainer_1_1_config_dependency_error.html">ConfigDependencyError</a></td><td>If one of more dependencies are not met, i.e. there is a config present that has dependencies and all of those dependencies could not be found. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8cpp_source.html#l00029">29</a> of file <a class="el" href="config_8cpp_source.html">config.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                                               :</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    m_sources(std::move(sources)),</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    m_mandatory(mandatory),</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    m_dependencies(dependencies),</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    m_stringConfigs(std::vector&lt;StringConfig&gt;()),</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    m_intConfigs(std::vector&lt;IntConfig&gt;()),</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    m_boolConfigs(std::vector&lt;BoolConfig&gt;()),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    m_allConfigs(std::vector&lt;UniqueKey&gt;())</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">     * The order of the calls below is important since some methods modifies members that are</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">     * needed in subsequent method calls.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// Read all ConfigItems from all sources and store them</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    readConfigsFromSources();</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">// If any ConfigItem has one or more dependencies which are not present, it is a fatal error</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    assertDependencies();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="comment">// If any group-key combo is mandatory and not present, it is a fatal error</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    assertAllMandatoryPresent();</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa7f2e47598dbdc585d4e15257477493c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string softwarecontainer::Config::getStringValue </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getStringValue Get a config value of type string </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">group</td><td>The name of the config group the value belongs to </td></tr>
    <tr><td class="paramname">key</td><td>The key for the config value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A string with the config value</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classsoftwarecontainer_1_1_config_not_found_error.html" title="A requested config item could not be found in any of the config sources. ">ConfigNotFoundError</a></td><td>If the config identified with 'group' and 'key' couldn't be found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8cpp_source.html#l00129">129</a> of file <a class="el" href="config_8cpp_source.html">config.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;{</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> getConfig(group, key, m_stringConfigs).value();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a76a95daa6a9318611f35dff757d3fd98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int softwarecontainer::Config::getIntValue </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getIntValue Get a config value of type int </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">group</td><td>The name of the config group the value belongs to </td></tr>
    <tr><td class="paramname">key</td><td>The key for the config value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An int with the config value</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classsoftwarecontainer_1_1_config_not_found_error.html" title="A requested config item could not be found in any of the config sources. ">ConfigNotFoundError</a></td><td>If the config identified with 'group' and 'key' couldn't be found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8cpp_source.html#l00134">134</a> of file <a class="el" href="config_8cpp_source.html">config.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">return</span> getConfig(group, key, m_intConfigs).value();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad4124e2115ae8de964d4c69a6626c4b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool softwarecontainer::Config::getBoolValue </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getBoolValue Get a config value of type bool </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">group</td><td>The name of the config group the value belongs to </td></tr>
    <tr><td class="paramname">key</td><td>The key for the config value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A bool with the config value</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classsoftwarecontainer_1_1_config_not_found_error.html" title="A requested config item could not be found in any of the config sources. ">ConfigNotFoundError</a></td><td>If the config identified with 'group' and 'key' couldn't be found </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="config_8cpp_source.html#l00139">139</a> of file <a class="el" href="config_8cpp_source.html">config.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">return</span> getConfig(group, key, m_boolConfigs).value();</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>agent/src/config/<a class="el" href="config_8h_source.html">config.h</a></li>
<li>agent/src/config/<a class="el" href="config_8cpp_source.html">config.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesoftwarecontainer.html">softwarecontainer</a></li><li class="navelem"><a class="el" href="classsoftwarecontainer_1_1_config.html">Config</a></li>
    <li class="footer">Generated on Mon Mar 6 2017 09:22:14 for softwarecontainer by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
