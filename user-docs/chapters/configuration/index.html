<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration &#8212; softwarecontainer 0.13.0-032399e 2016-12-21 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.13.0-032399e 2016-12-21',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Service manifests" href="../service-manifests/index.html" />
    <link rel="prev" title="Design" href="../design/index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuration">
<span id="id1"></span><h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>This chapter gives a brief overview of mechanisms that are used to configure SoftwareContainer (SC).</p>
<p>There are different categories of configuration sources for SC:</p>
<ul class="simple">
<li>Build configuration</li>
<li>Main configuration of SC itself</li>
<li>Command line options</li>
<li>LXC configuration</li>
<li>Gateway configuration</li>
<li>Dynamic configuration on D-Bus interface</li>
</ul>
<p>There are different purposes of the configurations:</p>
<ul class="simple">
<li>SC functionality and behavior</li>
<li>LXC container configuration</li>
<li>Environment of the application running inside a container</li>
</ul>
<p>Configurations are applied at startup by means of installed config files, or at a later stage
through the D-Bus API.</p>
<div class="section" id="build-configuration">
<h2>Build configuration<a class="headerlink" href="#build-configuration" title="Permalink to this headline">¶</a></h2>
<p>CMake options can be used to configure SC during the configure stage of building. Which gateways
that will be enabled are defined at this stage and are explained below. For a complete list of
options and the details about them, see the top level <code class="docutils literal"><span class="pre">README.md</span></code> and top level <code class="docutils literal"><span class="pre">CMakeLists.txt</span></code>
in the SC repo.</p>
<p>Some configuraion options might affect the content of other config files that are created during
the build process, or default values used by SC at runtime.</p>
<div class="section" id="gateways-build-options">
<h3>Gateways build options<a class="headerlink" href="#gateways-build-options" title="Permalink to this headline">¶</a></h3>
<p>If a gateway is disabled this means that the gateway will not be part of SoftwareContainer at
compile time, hence this will disable the IPC mechanism that the gateway in question handles.
As an example, the following snippet will configure SC without any network support:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">cmake</span> <span class="o">-</span><span class="n">DENABLE_NETWORKGATEWAY</span><span class="o">=</span><span class="n">OFF</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="main-softwarecontainer-config">
<h2>Main SoftwareContainer config<a class="headerlink" href="#main-softwarecontainer-config" title="Permalink to this headline">¶</a></h2>
<p>The main configuration of SC is defined in a configuration file which is configured and installed
by the build system and located (by default) in <code class="docutils literal"><span class="pre">/usr/local/etc/softwarecontainer//softwarecontainer-config</span></code>.</p>
<p>In the config file, all options available are present and the ones that are optional are set to their
default value and commented out. The values they are set to is what will be used unless otherwise
specified by being uncommented and set to a different value.</p>
<p>Any options in the config file that are not commented out by default are mandatory and needs to
be present. It is an error to comment these out or remove them.</p>
<p>Some of the options in this config can also be set on command line, see <a class="reference internal" href="#cmd-line-options"><span class="std std-ref">Command line options</span></a>.</p>
<p>In the case of multiple sources of the same config option being available, the order of precedence is:</p>
<ul class="simple">
<li>Command line options related to the main config options are always considered first</li>
<li>Config file options are considered secondly</li>
<li>Defaults are applied if nothing else was specified</li>
</ul>
</div>
<div class="section" id="command-line-options">
<span id="cmd-line-options"></span><h2>Command line options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h2>
<p>It is possible to configure SoftwareContainer with command line options.</p>
<p><strong>-c or &#8211;config &lt;path&gt;</strong> Path to SoftwareContainer configuration file, defaults to <code class="docutils literal"><span class="pre">/usr/local/etc/softwarecontainer//softwarecontainer-config</span></code></p>
<p><strong>-p or &#8211;preload &lt;num&gt;</strong> Number of containers to preload, defaults to <code class="docutils literal"><span class="pre">1</span></code></p>
<p><strong>-u or &#8211;user &lt;uid&gt;</strong> Default user id to be used when starting processes in the container, defaults to <code class="docutils literal"><span class="pre">0</span></code>.
This option is deprecated.</p>
<p><strong>-k or &#8211;keep-containers-alive</strong> Containers will not be shut down on exit. Useful for debugging.
Defaults to <code class="docutils literal"><span class="pre">false</span></code></p>
<p><strong>-t or &#8211;timeout &lt;seconds&gt;</strong> Timeout in seconds to wait for containers to shutdown,
defaults to <code class="docutils literal"><span class="pre">1</span></code></p>
<p><strong>-m or &#8211;manifest-dir &lt;path&gt;</strong> Path to a file or directory where service manifest(s) exist,
defaults to <code class="docutils literal"><span class="pre">/usr/local/etc/softwarecontainer//service-manifest.d/</span></code></p>
<p><strong>-d or &#8211;default-manifest-dir &lt;path&gt;</strong> Path to a file or directory where default service manifest(s) exist,
defaults to <code class="docutils literal"><span class="pre">/usr/local/etc/softwarecontainer//service-manifest.default.d/</span></code></p>
<p><strong>-b or &#8211;session-bus</strong> To use the session bus on D-Bus, instead of the system bus. Defaults to <code class="docutils literal"><span class="pre">FALSE</span></code></p>
<p><strong>-h or &#8211;help</strong> Display usage and exit</p>
</div>
<div class="section" id="lxc-config">
<h2>LXC config<a class="headerlink" href="#lxc-config" title="Permalink to this headline">¶</a></h2>
<p>LXC is configured partly by the LXC template <code class="docutils literal"><span class="pre">libsoftwarecontainer/lxc-softwarecontainer.in</span></code> which is configured
and installed by CMake. This is passed to LXC by SC.</p>
<p>The other source of LXC specific configuration is in <code class="docutils literal"><span class="pre">libsoftwarecontainer/softwarecontainer.conf.in</span></code> which is
configured and installed by CMake to <code class="docutils literal"><span class="pre">/usr/local/etc/softwarecontainer//softwarecontainer.conf</span></code>.</p>
</div>
<div class="section" id="gateway-configuration">
<h2>Gateway configuration<a class="headerlink" href="#gateway-configuration" title="Permalink to this headline">¶</a></h2>
<p>Gateways (that are configured to be built) are configured by means of gateway configs. For details about
these configs, their content and format, and how they are applied, see <a class="reference internal" href="../design/index.html#design"><span class="std std-ref">Design</span></a>,
<a class="reference internal" href="../integration-guidelines/00-index.html#integration-guidelines"><span class="std std-ref">Integration guidelines</span></a>, and <a class="reference internal" href="../gateways/00-index.html#gateways"><span class="std std-ref">Gateways</span></a>.</p>
</div>
<div class="section" id="dynamic-configuration">
<h2>Dynamic configuration<a class="headerlink" href="#dynamic-configuration" title="Permalink to this headline">¶</a></h2>
<p>When creating containers using the D-Bus interface, a configuration is passed as a JSON string.
For more details, see <a class="reference internal" href="../getting-started/index.html#getting-started"><span class="std std-ref">Getting Started</span></a>.</p>
<p>This configuration is used for configs that needs to be set per container at runtime.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Configuration</a><ul>
<li><a class="reference internal" href="#build-configuration">Build configuration</a><ul>
<li><a class="reference internal" href="#gateways-build-options">Gateways build options</a></li>
</ul>
</li>
<li><a class="reference internal" href="#main-softwarecontainer-config">Main SoftwareContainer config</a></li>
<li><a class="reference internal" href="#command-line-options">Command line options</a></li>
<li><a class="reference internal" href="#lxc-config">LXC config</a></li>
<li><a class="reference internal" href="#gateway-configuration">Gateway configuration</a></li>
<li><a class="reference internal" href="#dynamic-configuration">Dynamic configuration</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../design/index.html" title="previous chapter">Design</a></li>
      <li>Next: <a href="../service-manifests/index.html" title="next chapter">Service manifests</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/chapters/configuration/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Pelagicore AB.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../../_sources/chapters/configuration/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>